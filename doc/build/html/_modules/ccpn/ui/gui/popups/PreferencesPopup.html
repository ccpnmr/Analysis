
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>ccpn.ui.gui.popups.PreferencesPopup &#8212; Python  documentation</title>
    <link rel="stylesheet" href="../../../../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="../../../../../" src="../../../../../_static/documentation_options.js"></script>
    <script src="../../../../../_static/jquery.js"></script>
    <script src="../../../../../_static/underscore.js"></script>
    <script src="../../../../../_static/doctools.js"></script>
    <script src="../../../../../_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../../index.html">Python  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../../../index.html" accesskey="U">Module code</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for ccpn.ui.gui.popups.PreferencesPopup</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Module Documentation here</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="c1">#=========================================================================================</span>
<span class="c1"># Licence, Reference and Credits</span>
<span class="c1">#=========================================================================================</span>
<span class="n">__copyright__</span> <span class="o">=</span> <span class="s2">&quot;Copyright (C) CCPN project (http://www.ccpn.ac.uk) 2014 - 2020&quot;</span>
<span class="n">__credits__</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;Ed Brooksbank, Luca Mureddu, Timothy J Ragan &amp; Geerten W Vuister&quot;</span><span class="p">)</span>
<span class="n">__licence__</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;CCPN licence. See http://www.ccpn.ac.uk/v3-software/downloads/license&quot;</span><span class="p">)</span>
<span class="n">__reference__</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;Skinner, S.P., Fogh, R.H., Boucher, W., Ragan, T.J., Mureddu, L.G., &amp; Vuister, G.W.&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;CcpNmr AnalysisAssign: a flexible platform for integrated NMR analysis&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;J.Biomol.Nmr (2016), 66, 111-124, http://doi.org/10.1007/s10858-016-0060-y&quot;</span><span class="p">)</span>
<span class="c1">#=========================================================================================</span>
<span class="c1"># Last code modification</span>
<span class="c1">#=========================================================================================</span>
<span class="n">__modifiedBy__</span> <span class="o">=</span> <span class="s2">&quot;$modifiedBy: Ed Brooksbank $&quot;</span>
<span class="n">__dateModified__</span> <span class="o">=</span> <span class="s2">&quot;$dateModified: 2020-02-10 16:59:38 +0000 (Mon, February 10, 2020) $&quot;</span>
<span class="n">__version__</span> <span class="o">=</span> <span class="s2">&quot;$Revision: 3.0.1 $&quot;</span>
<span class="c1">#=========================================================================================</span>
<span class="c1"># Created</span>
<span class="c1">#=========================================================================================</span>
<span class="n">__author__</span> <span class="o">=</span> <span class="s2">&quot;$Author: CCPN $&quot;</span>
<span class="n">__date__</span> <span class="o">=</span> <span class="s2">&quot;$Date: 2017-03-30 11:28:58 +0100 (Thu, March 30, 2017) $&quot;</span>
<span class="c1">#=========================================================================================</span>
<span class="c1"># Start of code</span>
<span class="c1">#=========================================================================================</span>

<span class="kn">from</span> <span class="nn">PyQt5</span> <span class="kn">import</span> <span class="n">QtWidgets</span><span class="p">,</span> <span class="n">QtCore</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
<span class="kn">from</span> <span class="nn">ccpn.ui.gui.widgets.Label</span> <span class="kn">import</span> <span class="n">Label</span>
<span class="kn">from</span> <span class="nn">ccpn.ui.gui.widgets.Frame</span> <span class="kn">import</span> <span class="n">Frame</span><span class="p">,</span> <span class="n">ScrollableFrame</span>
<span class="kn">from</span> <span class="nn">ccpn.ui.gui.widgets.Button</span> <span class="kn">import</span> <span class="n">Button</span>
<span class="kn">from</span> <span class="nn">ccpn.ui.gui.widgets.FileDialog</span> <span class="kn">import</span> <span class="n">FileDialog</span>
<span class="kn">from</span> <span class="nn">ccpn.ui.gui.widgets.LineEdit</span> <span class="kn">import</span> <span class="n">LineEdit</span><span class="p">,</span> <span class="n">PasswordEdit</span>
<span class="kn">from</span> <span class="nn">ccpn.ui.gui.widgets.DoubleSpinbox</span> <span class="kn">import</span> <span class="n">DoubleSpinbox</span><span class="p">,</span> <span class="n">ScientificDoubleSpinBox</span>
<span class="kn">from</span> <span class="nn">ccpn.ui.gui.widgets.Spinbox</span> <span class="kn">import</span> <span class="n">Spinbox</span>
<span class="kn">from</span> <span class="nn">ccpn.ui.gui.widgets.PulldownList</span> <span class="kn">import</span> <span class="n">PulldownList</span>
<span class="kn">from</span> <span class="nn">ccpn.ui.gui.widgets.CheckBox</span> <span class="kn">import</span> <span class="n">CheckBox</span>
<span class="kn">from</span> <span class="nn">ccpn.ui.gui.widgets.RadioButtons</span> <span class="kn">import</span> <span class="n">RadioButtons</span>
<span class="kn">from</span> <span class="nn">ccpn.ui.gui.guiSettings</span> <span class="kn">import</span> <span class="n">COLOUR_SCHEMES</span><span class="p">,</span> <span class="n">getColours</span><span class="p">,</span> <span class="n">DIVIDER</span><span class="p">,</span> <span class="n">setColourScheme</span>
<span class="kn">from</span> <span class="nn">ccpn.framework.Translation</span> <span class="kn">import</span> <span class="n">languages</span>
<span class="kn">from</span> <span class="nn">ccpn.ui.gui.popups.Dialog</span> <span class="kn">import</span> <span class="n">handleDialogApply</span><span class="p">,</span> <span class="n">_verifyPopupApply</span>
<span class="kn">from</span> <span class="nn">ccpn.ui.gui.widgets</span> <span class="kn">import</span> <span class="n">MessageDialog</span>
<span class="kn">from</span> <span class="nn">ccpn.ui.gui.widgets.Tabs</span> <span class="kn">import</span> <span class="n">Tabs</span>
<span class="kn">from</span> <span class="nn">ccpn.ui.gui.widgets.HLine</span> <span class="kn">import</span> <span class="n">HLine</span>
<span class="kn">from</span> <span class="nn">ccpn.util.Logging</span> <span class="kn">import</span> <span class="n">getLogger</span>
<span class="kn">from</span> <span class="nn">ccpn.util.Colour</span> <span class="kn">import</span> <span class="n">spectrumColours</span><span class="p">,</span> <span class="n">addNewColour</span><span class="p">,</span> <span class="n">fillColourPulldown</span><span class="p">,</span> <span class="n">colourNameNoSpace</span><span class="p">,</span> <span class="n">_setColourPulldown</span>
<span class="kn">from</span> <span class="nn">ccpn.ui.gui.widgets.ColourDialog</span> <span class="kn">import</span> <span class="n">ColourDialog</span>
<span class="kn">from</span> <span class="nn">ccpn.ui.gui.widgets.Spacer</span> <span class="kn">import</span> <span class="n">Spacer</span>
<span class="kn">from</span> <span class="nn">ccpn.core.PeakList</span> <span class="kn">import</span> <span class="n">GAUSSIANMETHOD</span><span class="p">,</span> <span class="n">PARABOLICMETHOD</span>
<span class="kn">from</span> <span class="nn">ccpn.core.MultipletList</span> <span class="kn">import</span> <span class="n">MULTIPLETAVERAGINGTYPES</span>
<span class="kn">from</span> <span class="nn">ccpn.util.UserPreferences</span> <span class="kn">import</span> <span class="n">UserPreferences</span>
<span class="kn">from</span> <span class="nn">ccpn.ui.gui.lib.GuiPath</span> <span class="kn">import</span> <span class="n">PathEdit</span>
<span class="kn">from</span> <span class="nn">ccpn.ui.gui.popups.ValidateSpectraPopup</span> <span class="kn">import</span> <span class="n">ValidateSpectraForPreferences</span>
<span class="kn">from</span> <span class="nn">ccpn.ui.gui.popups.Dialog</span> <span class="kn">import</span> <span class="n">CcpnDialogMainWidget</span>
<span class="kn">from</span> <span class="nn">ccpn.core.lib.ContextManagers</span> <span class="kn">import</span> <span class="n">queueStateChange</span><span class="p">,</span> <span class="n">undoStackBlocking</span>
<span class="kn">from</span> <span class="nn">ccpn.ui.gui.widgets.PlaneToolbar</span> <span class="kn">import</span> <span class="n">EMITSOURCE</span><span class="p">,</span> <span class="n">EMITCLICKED</span><span class="p">,</span> <span class="n">EMITIGNORESOURCE</span>


<span class="n">PEAKFITTINGDEFAULTS</span> <span class="o">=</span> <span class="p">[</span><span class="n">PARABOLICMETHOD</span><span class="p">,</span> <span class="n">GAUSSIANMETHOD</span><span class="p">]</span>

<span class="c1"># FIXME separate pure GUI to project/preferences properties</span>
<span class="c1"># The code sets Gui Parameters assuming that  Preference is not None and has a bunch of attributes.</span>


<span class="n">PulldownListsMinimumWidth</span> <span class="o">=</span> <span class="mi">200</span>
<span class="n">LineEditsMinimumWidth</span> <span class="o">=</span> <span class="mi">195</span>
<span class="n">NotImplementedTipText</span> <span class="o">=</span> <span class="s1">&#39;This option has not been implemented yet&#39;</span>
<span class="n">DEFAULTSPACING</span> <span class="o">=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">TABMARGINS</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1"># l, t, r, b</span>
<span class="n">ZEROMARGINS</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>  <span class="c1"># l, t, r, b</span>


<span class="k">def</span> <span class="nf">_updateSettings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newPrefs</span><span class="p">,</span> <span class="n">updateColourScheme</span><span class="p">,</span> <span class="n">updateSpectrumDisplays</span><span class="p">):</span>
    <span class="kn">from</span> <span class="nn">ccpn.ui.gui.lib.OpenGL.CcpnOpenGL</span> <span class="kn">import</span> <span class="n">GLNotifier</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">application</span><span class="o">.</span><span class="n">preferences</span> <span class="o">=</span> <span class="n">newPrefs</span>
    <span class="c1"># application preferences updated so re-save</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">application</span><span class="o">.</span><span class="n">_savePreferences</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_updateDisplay</span><span class="p">(</span><span class="n">updateColourScheme</span><span class="p">,</span> <span class="n">updateSpectrumDisplays</span><span class="p">)</span>

    <span class="n">GLSignals</span> <span class="o">=</span> <span class="n">GLNotifier</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
    <span class="n">GLSignals</span><span class="o">.</span><span class="n">emitPaintEvent</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">_refreshGLItems</span><span class="p">():</span>
    <span class="k">pass</span>


<div class="viewcode-block" id="PreferencesPopup"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.popups.html#ccpn.ui.gui.popups.PreferencesPopup.PreferencesPopup">[docs]</a><span class="k">class</span> <span class="nc">PreferencesPopup</span><span class="p">(</span><span class="n">CcpnDialogMainWidget</span><span class="p">):</span>
    <span class="n">FIXEDHEIGHT</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">FIXEDWIDTH</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mainWindow</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">preferences</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Preferences&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">setLayout</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">windowTitle</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">mainWindow</span> <span class="o">=</span> <span class="n">mainWindow</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">application</span> <span class="o">=</span> <span class="n">mainWindow</span><span class="o">.</span><span class="n">application</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">mainWindow</span><span class="o">.</span><span class="n">application</span><span class="o">.</span><span class="n">project</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">application</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="p">:</span>
            <span class="n">MessageDialog</span><span class="o">.</span><span class="n">showWarning</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="s1">&#39;No project loaded&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="k">return</span>

        <span class="c1"># copy the current preferences</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">preferences</span><span class="p">)</span>

        <span class="c1"># grab the class with the preferences methods</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_userPreferences</span> <span class="o">=</span> <span class="n">UserPreferences</span><span class="p">(</span><span class="n">readPreferences</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="c1"># store the original values - needs to be recursive</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lastPrefs</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_setTabs</span><span class="p">()</span>

        <span class="c1"># enable the buttons</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setOkButton</span><span class="p">(</span><span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_okClicked</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setApplyButton</span><span class="p">(</span><span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_applyClicked</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setCancelButton</span><span class="p">(</span><span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_cancelClicked</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setHelpButton</span><span class="p">(</span><span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_helpClicked</span><span class="p">,</span> <span class="n">enabled</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setRevertButton</span><span class="p">(</span><span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_revertClicked</span><span class="p">,</span> <span class="n">enabled</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setDefaultButton</span><span class="p">(</span><span class="n">CcpnDialogMainWidget</span><span class="o">.</span><span class="n">CANCELBUTTON</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_populate</span><span class="p">()</span>

        <span class="n">tabs</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tabWidget</span><span class="o">.</span><span class="n">widget</span><span class="p">(</span><span class="n">ii</span><span class="p">)</span> <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tabWidget</span><span class="o">.</span><span class="n">count</span><span class="p">()))</span>
        <span class="n">w</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">tab</span><span class="o">.</span><span class="n">sizeHint</span><span class="p">()</span><span class="o">.</span><span class="n">width</span><span class="p">()</span> <span class="k">for</span> <span class="n">tab</span> <span class="ow">in</span> <span class="n">tabs</span><span class="p">)</span> <span class="o">+</span> <span class="mi">20</span>
        <span class="n">h</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">tab</span><span class="o">.</span><span class="n">sizeHint</span><span class="p">()</span><span class="o">.</span><span class="n">height</span><span class="p">()</span> <span class="k">for</span> <span class="n">tab</span> <span class="ow">in</span> <span class="n">tabs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_size</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QSize</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__postInit__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_applyButton</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getButton</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">APPLYBUTTON</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_revertButton</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getButton</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">RESETBUTTON</span><span class="p">)</span>

<div class="viewcode-block" id="PreferencesPopup.getActiveTabList"><a class="viewcode-back" href="../../../../../ccpn/ccpn.ui.gui.popups.html#ccpn.ui.gui.popups.PreferencesPopup.PreferencesPopup.getActiveTabList">[docs]</a>    <span class="k">def</span> <span class="nf">getActiveTabList</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the list of active tabs</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tabWidget</span><span class="o">.</span><span class="n">widget</span><span class="p">(</span><span class="n">ii</span><span class="p">)</span> <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tabWidget</span><span class="o">.</span><span class="n">count</span><span class="p">()))</span></div>

    <span class="k">def</span> <span class="nf">_revertClicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Revert button signal comes here</span>
<span class="sd">        Revert (roll-back) the state of the project to before the popup was opened</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Reset preferences to previous state</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_currentNumApplies</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">project</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">_undo</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">undos</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_currentNumApplies</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">_undo</span><span class="o">.</span><span class="n">undo</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">application</span><span class="o">.</span><span class="n">_savePreferences</span><span class="p">()</span>

        <span class="c1"># retrieve the original preferences</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_lastPrefs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_populate</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_applyButton</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_revertButton</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_updateSpectrumDisplays</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">checked</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">application</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">showToolbar</span>
        <span class="k">for</span> <span class="n">display</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">spectrumDisplays</span><span class="p">:</span>

            <span class="k">for</span> <span class="n">strip</span> <span class="ow">in</span> <span class="n">display</span><span class="o">.</span><span class="n">strips</span><span class="p">:</span>
                <span class="k">with</span> <span class="n">strip</span><span class="o">.</span><span class="n">blockWidgetSignals</span><span class="p">():</span>
                    <span class="n">strip</span><span class="o">.</span><span class="n">symbolLabelling</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">application</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">annotationType</span>
                    <span class="n">strip</span><span class="o">.</span><span class="n">symbolType</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">application</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">symbolType</span>
                    <span class="n">strip</span><span class="o">.</span><span class="n">symbolSize</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">application</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">symbolSizePixel</span>

                    <span class="n">strip</span><span class="o">.</span><span class="n">symbolThickness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">application</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">symbolThickness</span>
                    <span class="n">strip</span><span class="o">.</span><span class="n">gridVisible</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">application</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">showGrid</span>
                    <span class="n">strip</span><span class="o">.</span><span class="n">_contourThickness</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">application</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">contourThickness</span>
                    <span class="n">strip</span><span class="o">.</span><span class="n">crosshairVisible</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">application</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">showCrosshair</span>
                    <span class="n">strip</span><span class="o">.</span><span class="n">doubleCrosshairVisible</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">application</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">showDoubleCrosshair</span>
                    <span class="n">strip</span><span class="o">.</span><span class="n">sideBandsVisible</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">application</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">showSideBands</span>

                    <span class="n">strip</span><span class="o">.</span><span class="n">spectrumBordersVisible</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">application</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">showSpectrumBorder</span>

                <span class="n">strip</span><span class="o">.</span><span class="n">_frameGuide</span><span class="o">.</span><span class="n">resetColourTheme</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_updateDisplay</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">updateColourScheme</span><span class="p">,</span> <span class="n">updateSpectrumDisplays</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">updateColourScheme</span><span class="p">:</span>
            <span class="c1"># change the colour theme</span>
            <span class="n">setColourScheme</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">application</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">colourScheme</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">application</span><span class="o">.</span><span class="n">correctColours</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">updateSpectrumDisplays</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_updateSpectrumDisplays</span><span class="p">()</span>

        <span class="c1"># colour theme has changed - flag displays to update</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_updateGui</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_applyChanges</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The apply button has been clicked</span>
<span class="sd">        Define an undo block for setting the properties of the object</span>
<span class="sd">        If there is an error setting any values then generate an error message</span>
<span class="sd">          If anything has been added to the undo queue then remove it with application.undo()</span>
<span class="sd">          repopulate the popup widgets</span>

<span class="sd">        This is controlled by a series of dicts that contain change functions - operations that are scheduled</span>
<span class="sd">        by changing items in the popup. These functions are executed when the Apply or OK buttons are clicked</span>

<span class="sd">        Return True unless any errors occurred</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># this will apply the immediate guiChanges with an undo block</span>
        <span class="c1"># applyToSDs = self.preferences.general.applyToSpectrumDisplays</span>

        <span class="c1"># need to get from the checkBox, otherwise out-of-sync</span>
        <span class="n">applyToSDs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">useApplyToSpectrumDisplaysBox</span><span class="o">.</span><span class="n">isChecked</span><span class="p">()</span>

        <span class="n">allChanges</span> <span class="o">=</span> <span class="kc">True</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_changes</span> <span class="k">else</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">allChanges</span> <span class="ow">and</span> <span class="n">applyToSDs</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">True</span>

        <span class="c1"># handle clicking of the Apply/OK button</span>
        <span class="k">with</span> <span class="n">handleDialogApply</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>

            <span class="c1"># remember the last state before applying changes</span>
            <span class="n">lastPrefs</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="p">)</span>

            <span class="c1"># apply all changes - only to self.preferences</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_applyAllChanges</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_changes</span><span class="p">)</span>

            <span class="c1"># check whether the colourScheme needs updating</span>
            <span class="n">_changeColour</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">colourScheme</span> <span class="o">!=</span> <span class="n">lastPrefs</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">colourScheme</span>

            <span class="c1"># add an undo item to update settings</span>
            <span class="k">with</span> <span class="n">undoStackBlocking</span><span class="p">()</span> <span class="k">as</span> <span class="n">addUndoItem</span><span class="p">:</span>
                <span class="n">addUndoItem</span><span class="p">(</span><span class="n">undo</span><span class="o">=</span><span class="n">partial</span><span class="p">(</span><span class="n">_updateSettings</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">lastPrefs</span><span class="p">,</span> <span class="n">_changeColour</span><span class="p">,</span> <span class="n">applyToSDs</span><span class="p">))</span>

            <span class="c1"># remember the new state - between addUndoItems because it may append to the undo stack</span>
            <span class="n">newPrefs</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="p">)</span>
            <span class="n">_updateSettings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newPrefs</span><span class="p">,</span> <span class="n">_changeColour</span><span class="p">,</span> <span class="n">applyToSDs</span><span class="p">)</span>

            <span class="c1"># add a redo item to update settings</span>
            <span class="k">with</span> <span class="n">undoStackBlocking</span><span class="p">()</span> <span class="k">as</span> <span class="n">addUndoItem</span><span class="p">:</span>
                <span class="n">addUndoItem</span><span class="p">(</span><span class="n">redo</span><span class="o">=</span><span class="n">partial</span><span class="p">(</span><span class="n">_updateSettings</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">newPrefs</span><span class="p">,</span> <span class="n">_changeColour</span><span class="p">,</span> <span class="n">applyToSDs</span><span class="p">))</span>

            <span class="c1"># everything has happened - disable the apply button</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_applyButton</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="c1"># check for any errors</span>
        <span class="k">if</span> <span class="n">error</span><span class="o">.</span><span class="n">errorValue</span><span class="p">:</span>
            <span class="c1"># re-populate popup from self.preferences on error</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_populate</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="c1"># remove all changes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_changes</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_currentNumApplies</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_revertButton</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">_updateGui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="c1"># prompt the GLwidgets to update</span>
        <span class="kn">from</span> <span class="nn">ccpn.ui.gui.lib.OpenGL.CcpnOpenGL</span> <span class="kn">import</span> <span class="n">GLNotifier</span>

        <span class="n">GLSignals</span> <span class="o">=</span> <span class="n">GLNotifier</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">GLSignals</span><span class="o">.</span><span class="n">emitEvent</span><span class="p">(</span><span class="n">triggers</span><span class="o">=</span><span class="p">[</span><span class="n">GLNotifier</span><span class="o">.</span><span class="n">GLALLCONTOURS</span><span class="p">,</span>
                                      <span class="n">GLNotifier</span><span class="o">.</span><span class="n">GLALLPEAKS</span><span class="p">,</span>
                                      <span class="n">GLNotifier</span><span class="o">.</span><span class="n">GLALLMULTIPLETS</span><span class="p">,</span>
                                      <span class="n">GLNotifier</span><span class="o">.</span><span class="n">GLPREFERENCES</span><span class="p">])</span>

        <span class="c1"># NOTE:ED - quick setting of new background colour for cornerWidget, not very nice should use a notifier</span>
        <span class="k">for</span> <span class="n">specDisplay</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">spectrumDisplays</span><span class="p">:</span>
            <span class="n">specDisplay</span><span class="o">.</span><span class="n">setVisibleAxes</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_setTabs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; Creates the tabs as Frame Widget. All the children widgets will go in the Frame.</span>
<span class="sd">         Each frame will be the widgets parent.</span>
<span class="sd">         Tabs are displayed by the order how appear here. &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tabWidget</span> <span class="o">=</span> <span class="n">Tabs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mainWidget</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">gridSpan</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tabWidget</span><span class="o">.</span><span class="n">setContentsMargins</span><span class="p">(</span><span class="o">*</span><span class="n">ZEROMARGINS</span><span class="p">)</span>
        <span class="c1"># self.tabWidget.getLayout().setSpacing(0)</span>

        <span class="k">for</span> <span class="p">(</span><span class="n">tabFunc</span><span class="p">,</span> <span class="n">tabName</span><span class="p">)</span> <span class="ow">in</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">_setGeneralTabWidgets</span><span class="p">,</span> <span class="s1">&#39;General&#39;</span><span class="p">),</span>
                                   <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setSpectrumTabWidgets</span><span class="p">,</span> <span class="s1">&#39;Spectrum&#39;</span><span class="p">),</span>
                                   <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setExternalProgramsTabWidgets</span><span class="p">,</span> <span class="s1">&#39;External Programs&#39;</span><span class="p">)):</span>
            <span class="n">fr</span> <span class="o">=</span> <span class="n">ScrollableFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mainWidget</span><span class="p">,</span> <span class="n">setLayout</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">spacing</span><span class="o">=</span><span class="n">DEFAULTSPACING</span><span class="p">,</span>
                                          <span class="n">scrollBarPolicies</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;never&#39;</span><span class="p">,</span> <span class="s1">&#39;asNeeded&#39;</span><span class="p">),</span> <span class="n">margins</span><span class="o">=</span><span class="n">TABMARGINS</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">tabWidget</span><span class="o">.</span><span class="n">addTab</span><span class="p">(</span><span class="n">fr</span><span class="o">.</span><span class="n">scrollArea</span><span class="p">,</span> <span class="n">tabName</span><span class="p">)</span>
            <span class="n">tabFunc</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="n">fr</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">useApplyToSpectrumDisplaysLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mainWidget</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Apply to All Spectrum Displays: &quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">useApplyToSpectrumDisplaysBox</span> <span class="o">=</span> <span class="n">CheckBox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mainWidget</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">useApplyToSpectrumDisplaysBox</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueApplyToSpectrumDisplays</span><span class="p">,</span> <span class="s1">&#39;applyToSpectrumDisplays&#39;</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_setGeneralTabWidgets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Insert a widget in here to appear in the General Tab  &quot;&quot;&quot;</span>

        <span class="n">row</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">languageLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Language&quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">languageBox</span> <span class="o">=</span> <span class="n">PulldownList</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">hAlign</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">languageBox</span><span class="o">.</span><span class="n">addItems</span><span class="p">(</span><span class="n">languages</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">languageBox</span><span class="o">.</span><span class="n">setMinimumWidth</span><span class="p">(</span><span class="n">PulldownListsMinimumWidth</span><span class="p">)</span>
        <span class="c1"># self.languageBox.setCurrentIndex(self.languageBox.findText(self.preferences.general.language))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">languageBox</span><span class="o">.</span><span class="n">currentIndexChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueChangeLanguage</span><span class="p">)</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">colourSchemeLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Colour Scheme &quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">colourSchemeBox</span> <span class="o">=</span> <span class="n">PulldownList</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">hAlign</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">colourSchemeBox</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s1">&#39;SpectrumDisplay Background only&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">colourSchemeBox</span><span class="o">.</span><span class="n">setMinimumWidth</span><span class="p">(</span><span class="n">PulldownListsMinimumWidth</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">colourSchemeBox</span><span class="o">.</span><span class="n">addItems</span><span class="p">(</span><span class="n">COLOUR_SCHEMES</span><span class="p">)</span>
        <span class="c1"># self.colourSchemeBox.setCurrentIndex(self.colourSchemeBox.findText(self.preferences.general.colourScheme))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_oldColourScheme</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">colourSchemeBox</span><span class="o">.</span><span class="n">currentIndexChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueChangeColourScheme</span><span class="p">)</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">useNativeFileLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Use Native File Dialogs: &quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">useNativeFileBox</span> <span class="o">=</span> <span class="n">CheckBox</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>  <span class="c1">#, checked=self.preferences.general.useNative)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">useNativeFileBox</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueToggleGeneralOptions</span><span class="p">,</span> <span class="s1">&#39;useNative&#39;</span><span class="p">))</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">useNativeLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Use Native Menus (requires restart): &quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">useNativeMenus</span> <span class="o">=</span> <span class="n">CheckBox</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>  <span class="c1">#, checked=self.preferences.general.useNativeMenus)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">useNativeMenus</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueToggleGeneralOptions</span><span class="p">,</span> <span class="s1">&#39;useNativeMenus&#39;</span><span class="p">))</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">useNativeWebLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Use Native Web Browser: &quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">useNativeWebBox</span> <span class="o">=</span> <span class="n">CheckBox</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>  <span class="c1">#, checked=self.preferences.general.useNativeWebbrowser)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">useNativeWebBox</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueToggleGeneralOptions</span><span class="p">,</span> <span class="s1">&#39;useNativeWebbrowser&#39;</span><span class="p">))</span>

        <span class="c1"># self._toggleGeneralOptions(&#39;useNativeWebbrowser&#39;, True)</span>
        <span class="c1"># self.useNativeWebLabel.setEnabled(False)</span>
        <span class="c1"># self.useNativeWebBox.setEnabled(False)</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoSaveLayoutOnQuitLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Auto Save Layout On Quit: &quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoSaveLayoutOnQuitBox</span> <span class="o">=</span> <span class="n">CheckBox</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>  <span class="c1">#,</span>
        <span class="c1"># checked=self.preferences.general.autoSaveLayoutOnQuit)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoSaveLayoutOnQuitBox</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueToggleGeneralOptions</span><span class="p">,</span> <span class="s1">&#39;autoSaveLayoutOnQuit&#39;</span><span class="p">))</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">restoreLayoutOnOpeningLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Restore Layout On Opening: &quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">restoreLayoutOnOpeningBox</span> <span class="o">=</span> <span class="n">CheckBox</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>  <span class="c1">#,</span>
        <span class="c1"># checked=self.preferences.general.restoreLayoutOnOpening)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">restoreLayoutOnOpeningBox</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueToggleGeneralOptions</span><span class="p">,</span> <span class="s1">&#39;restoreLayoutOnOpening&#39;</span><span class="p">))</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoBackupEnabledLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Auto Backup On: &quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoBackupEnabledBox</span> <span class="o">=</span> <span class="n">CheckBox</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>  <span class="c1">#, checked=self.preferences.general.autoBackupEnabled)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoBackupEnabledBox</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueToggleGeneralOptions</span><span class="p">,</span> <span class="s1">&#39;autoBackupEnabled&#39;</span><span class="p">))</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoBackupFrequencyLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Auto Backup Freq (mins)&quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoBackupFrequencyData</span> <span class="o">=</span> <span class="n">DoubleSpinbox</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">hAlign</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoBackupFrequencyData</span><span class="o">.</span><span class="n">setMinimumWidth</span><span class="p">(</span><span class="n">LineEditsMinimumWidth</span><span class="p">)</span>
        <span class="c1"># self.autoBackupFrequencyData.setValue(self.preferences.general.autoBackupFrequency)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoBackupFrequencyData</span><span class="o">.</span><span class="n">valueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueSetAutoBackupFrequency</span><span class="p">)</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">HLine</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">gridSpan</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">colour</span><span class="o">=</span><span class="n">getColours</span><span class="p">()[</span><span class="n">DIVIDER</span><span class="p">],</span> <span class="n">height</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">userWorkingPathLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="s2">&quot;User Working Path &quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">userWorkingPathData</span> <span class="o">=</span> <span class="n">PathEdit</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">vAlign</span><span class="o">=</span><span class="s1">&#39;t&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">userWorkingPathData</span><span class="o">.</span><span class="n">setMinimumWidth</span><span class="p">(</span><span class="n">LineEditsMinimumWidth</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">userWorkingPathButton</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_getUserWorkingPath</span><span class="p">,</span>
                                            <span class="n">icon</span><span class="o">=</span><span class="s1">&#39;icons/directory&#39;</span><span class="p">,</span> <span class="n">hPolicy</span><span class="o">=</span><span class="s1">&#39;fixed&#39;</span><span class="p">)</span>
        <span class="c1"># self.userLayoutsLe.setText(self.preferences.general.get(&#39;userLayoutsPath&#39;))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">userWorkingPathData</span><span class="o">.</span><span class="n">textChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueSetUserWorkingPath</span><span class="p">)</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">userLayouts</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;User Predefined Layouts &quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">userLayoutsLe</span> <span class="o">=</span> <span class="n">PathEdit</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">vAlign</span><span class="o">=</span><span class="s1">&#39;t&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">userLayoutsLe</span><span class="o">.</span><span class="n">setMinimumWidth</span><span class="p">(</span><span class="n">LineEditsMinimumWidth</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">userLayoutsLeButton</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_getUserLayoutsPath</span><span class="p">,</span>
                                          <span class="n">icon</span><span class="o">=</span><span class="s1">&#39;icons/directory&#39;</span><span class="p">,</span> <span class="n">hPolicy</span><span class="o">=</span><span class="s1">&#39;fixed&#39;</span><span class="p">)</span>
        <span class="c1"># self.userLayoutsLe.setText(self.preferences.general.get(&#39;userLayoutsPath&#39;))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">userLayoutsLe</span><span class="o">.</span><span class="n">textChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueSetuserLayoutsPath</span><span class="p">)</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">auxiliaryFilesLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Auxiliary Files Path &quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">auxiliaryFilesData</span> <span class="o">=</span> <span class="n">PathEdit</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">vAlign</span><span class="o">=</span><span class="s1">&#39;t&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">auxiliaryFilesData</span><span class="o">.</span><span class="n">setMinimumWidth</span><span class="p">(</span><span class="n">LineEditsMinimumWidth</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">auxiliaryFilesDataButton</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_getAuxiliaryFilesPath</span><span class="p">,</span>
                                               <span class="n">icon</span><span class="o">=</span><span class="s1">&#39;icons/directory&#39;</span><span class="p">,</span> <span class="n">hPolicy</span><span class="o">=</span><span class="s1">&#39;fixed&#39;</span><span class="p">)</span>
        <span class="c1"># self.auxiliaryFilesData.setText(self.preferences.general.auxiliaryFilesPath)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">auxiliaryFilesData</span><span class="o">.</span><span class="n">textChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueSetAuxiliaryFilesPath</span><span class="p">)</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">macroPathLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Macro Path&quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">macroPathData</span> <span class="o">=</span> <span class="n">PathEdit</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">vAlign</span><span class="o">=</span><span class="s1">&#39;t&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">macroPathData</span><span class="o">.</span><span class="n">setMinimumWidth</span><span class="p">(</span><span class="n">LineEditsMinimumWidth</span><span class="p">)</span>
        <span class="c1"># self.macroPathData.setText(self.preferences.general.userMacroPath)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">macroPathDataButton</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_getMacroFilesPath</span><span class="p">,</span>
                                          <span class="n">icon</span><span class="o">=</span><span class="s1">&#39;icons/directory&#39;</span><span class="p">,</span> <span class="n">hPolicy</span><span class="o">=</span><span class="s1">&#39;fixed&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">macroPathData</span><span class="o">.</span><span class="n">textChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueSetMacroFilesPath</span><span class="p">)</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pluginPathLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Plugin Path&quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pluginPathData</span> <span class="o">=</span> <span class="n">PathEdit</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">vAlign</span><span class="o">=</span><span class="s1">&#39;t&#39;</span><span class="p">,</span> <span class="n">tipText</span><span class="o">=</span><span class="n">NotImplementedTipText</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pluginPathData</span><span class="o">.</span><span class="n">setMinimumWidth</span><span class="p">(</span><span class="n">LineEditsMinimumWidth</span><span class="p">)</span>
        <span class="c1"># self.pluginPathData.setText(self.preferences.general.userPluginPath)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pluginPathDataButton</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_getPluginFilesPath</span><span class="p">,</span>
                                           <span class="n">icon</span><span class="o">=</span><span class="s1">&#39;icons/directory&#39;</span><span class="p">,</span> <span class="n">hPolicy</span><span class="o">=</span><span class="s1">&#39;fixed&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pluginPathData</span><span class="o">.</span><span class="n">textChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueSetPluginFilesPath</span><span class="p">)</span>

        <span class="c1"># TODO enable plugin PathData</span>
        <span class="c1"># self.pluginPathData.setDisabled(True)</span>
        <span class="c1"># self.pluginPathDataButton.setDisabled(True)</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pipesPathLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Pipes Path&quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pipesPathData</span> <span class="o">=</span> <span class="n">PathEdit</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">vAlign</span><span class="o">=</span><span class="s1">&#39;t&#39;</span><span class="p">,</span> <span class="n">tipText</span><span class="o">=</span><span class="n">NotImplementedTipText</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pipesPathData</span><span class="o">.</span><span class="n">setMinimumWidth</span><span class="p">(</span><span class="n">LineEditsMinimumWidth</span><span class="p">)</span>
        <span class="c1"># self.pipesPathData.setText(self.preferences.general.userExtensionPath)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pipesPathDataButton</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_getExtensionFilesPath</span><span class="p">,</span>
                                          <span class="n">icon</span><span class="o">=</span><span class="s1">&#39;icons/directory&#39;</span><span class="p">,</span> <span class="n">hPolicy</span><span class="o">=</span><span class="s1">&#39;fixed&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pipesPathData</span><span class="o">.</span><span class="n">textChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueSetPipesFilesPath</span><span class="p">)</span>
        <span class="c1"># TODO enable pipes PathData</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pipesPathData</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pipesPathDataButton</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># row += 1</span>
        <span class="c1"># self.annotationsLabel = Label(parent, text=&quot;Annotations&quot;, grid=(row, 0))</span>
        <span class="c1"># try:</span>
        <span class="c1">#   annType = self.preferences.general.annotationType</span>
        <span class="c1"># except:</span>
        <span class="c1">#   annType = 0</span>
        <span class="c1">#   self.preferences.general.annotationType = annType</span>
        <span class="c1"># self.annotationsData = RadioButtons(parent, texts=[&#39;Short&#39;, &#39;Full&#39;, &#39;Pid&#39;],</span>
        <span class="c1">#                                                    selectedInd=annType,</span>
        <span class="c1">#                                                    callback=self._setAnnotations,</span>
        <span class="c1">#                                                    direction=&#39;horizontal&#39;,</span>
        <span class="c1">#                                                    grid=(row, 1), hAlign=&#39;l&#39;,</span>
        <span class="c1">#                                                    tipTexts=None,</span>
        <span class="c1">#                                                    )</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">HLine</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">gridSpan</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">colour</span><span class="o">=</span><span class="n">getColours</span><span class="p">()[</span><span class="n">DIVIDER</span><span class="p">],</span> <span class="n">height</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">useProxyLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Use Proxy Settings: &quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">useProxyBox</span> <span class="o">=</span> <span class="n">CheckBox</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>  <span class="c1">#, checked=self.preferences.proxySettings.useProxy)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">useProxyBox</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueSetUseProxy</span><span class="p">)</span>

        <span class="c1"># row += 1</span>
        <span class="c1"># self.useSystemProxyLabel = Label(parent, text=&quot;   Use System Proxy for Network: &quot;, grid=(row, 0))</span>
        <span class="c1"># self.useSystemProxyBox = CheckBox(parent, grid=(row, 1), checked=self.preferences.proxySettings.useSystemProxy)</span>
        <span class="c1"># self.useSystemProxyBox.toggled.connect(self._queueSetUseSystemProxy)</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxyAddressLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;   Web Proxy Server: &quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">hAlign</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxyAddressData</span> <span class="o">=</span> <span class="n">LineEdit</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">hAlign</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxyAddressData</span><span class="o">.</span><span class="n">setMinimumWidth</span><span class="p">(</span><span class="n">LineEditsMinimumWidth</span><span class="p">)</span>
        <span class="c1"># self.proxyAddressData.setText(str(self.preferences.proxySettings.proxyAddress))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxyAddressData</span><span class="o">.</span><span class="n">textEdited</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueSetProxyAddress</span><span class="p">)</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxyPortLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;   Port: &quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">hAlign</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxyPortData</span> <span class="o">=</span> <span class="n">LineEdit</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">hAlign</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxyPortData</span><span class="o">.</span><span class="n">setMinimumWidth</span><span class="p">(</span><span class="n">LineEditsMinimumWidth</span><span class="p">)</span>
        <span class="c1"># self.proxyPortData.setText(str(self.preferences.proxySettings.proxyPort))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxyPortData</span><span class="o">.</span><span class="n">textEdited</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueSetProxyPort</span><span class="p">)</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">useProxyPasswordLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;   Proxy Server Requires Password: &quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">useProxyPasswordBox</span> <span class="o">=</span> <span class="n">CheckBox</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>  <span class="c1">#, checked=self.preferences.proxySettings.useProxyPassword)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">useProxyPasswordBox</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueSetUseProxyPassword</span><span class="p">)</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxyUsernameLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;        Username: &quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">hAlign</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxyUsernameData</span> <span class="o">=</span> <span class="n">LineEdit</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">hAlign</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxyUsernameData</span><span class="o">.</span><span class="n">setMinimumWidth</span><span class="p">(</span><span class="n">LineEditsMinimumWidth</span><span class="p">)</span>
        <span class="c1"># self.proxyUsernameData.setText(str(self.preferences.proxySettings.proxyUsername))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxyUsernameData</span><span class="o">.</span><span class="n">textEdited</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueSetProxyUsername</span><span class="p">)</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxyPasswordLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;        Password: &quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">hAlign</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxyPasswordData</span> <span class="o">=</span> <span class="n">PasswordEdit</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">hAlign</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxyPasswordData</span><span class="o">.</span><span class="n">setMinimumWidth</span><span class="p">(</span><span class="n">LineEditsMinimumWidth</span><span class="p">)</span>
        <span class="c1"># self.proxyPasswordData.setText(self._userPreferences.decodeValue(str(self.preferences.proxySettings.proxyPassword)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxyPasswordData</span><span class="o">.</span><span class="n">textEdited</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueSetProxyPassword</span><span class="p">)</span>

        <span class="c1"># set the enabled state of the proxy settings boxes</span>
        <span class="c1"># self._setProxyButtons()</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">Spacer</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span>
               <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">MinimumExpanding</span><span class="p">,</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">MinimumExpanding</span><span class="p">,</span>
               <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">gridSpan</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_populate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Populate the widgets in the tabs</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">blockWidgetSignals</span><span class="p">():</span>
            <span class="c1"># clear all changes</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_changes</span> <span class="o">=</span> <span class="p">{}</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">useApplyToSpectrumDisplaysBox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">applyToSpectrumDisplays</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_populateGeneralTab</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_populateSpectrumTab</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_populateExternalProgramsTab</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_populateGeneralTab</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Populate the widgets in the generalTab</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">languageBox</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">languageBox</span><span class="o">.</span><span class="n">findText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">language</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">colourSchemeBox</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">colourSchemeBox</span><span class="o">.</span><span class="n">findText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">colourScheme</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">useNativeFileBox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">useNative</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">useNativeMenus</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">useNativeMenus</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">useNativeWebBox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">useNativeWebbrowser</span><span class="p">)</span>

        <span class="c1"># TODO:ED disabled for testing</span>
        <span class="c1"># self._toggleGeneralOptions(&#39;useNativeWebbrowser&#39;, True)</span>
        <span class="c1"># self.useNativeWebLabel.setEnabled(False)</span>
        <span class="c1"># self.useNativeWebBox.setEnabled(False)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">autoSaveLayoutOnQuitBox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">autoSaveLayoutOnQuit</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">restoreLayoutOnOpeningBox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">restoreLayoutOnOpening</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoBackupEnabledBox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">autoBackupEnabled</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoBackupFrequencyData</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">autoBackupFrequency</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">userLayoutsLe</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">userLayoutsPath</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">userWorkingPathData</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">userWorkingPath</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">auxiliaryFilesData</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">auxiliaryFilesPath</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">macroPathData</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">userMacroPath</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pluginPathData</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">userPluginPath</span><span class="p">)</span>

        <span class="c1"># # TODO enable plugin PathData</span>
        <span class="c1"># self.pluginPathData.setDisabled(True)</span>
        <span class="c1"># self.pluginPathDataButton.setDisabled(True)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pipesPathData</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">userExtensionPath</span><span class="p">)</span>

        <span class="c1"># TODO enable pipes PathData</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pipesPathData</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pipesPathDataButton</span><span class="o">.</span><span class="n">setDisabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">useProxyBox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">proxySettings</span><span class="o">.</span><span class="n">useProxy</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxyAddressData</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">proxySettings</span><span class="o">.</span><span class="n">proxyAddress</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxyPortData</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">proxySettings</span><span class="o">.</span><span class="n">proxyPort</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">useProxyPasswordBox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">proxySettings</span><span class="o">.</span><span class="n">useProxyPassword</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxyUsernameData</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">proxySettings</span><span class="o">.</span><span class="n">proxyUsername</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxyPasswordData</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_userPreferences</span><span class="o">.</span><span class="n">decodeValue</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">proxySettings</span><span class="o">.</span><span class="n">proxyPassword</span><span class="p">)))</span>

        <span class="c1"># set the enabled state of the proxy settings boxes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setProxyButtons</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_populateSpectrumTab</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Populate the widgets in the spectrumTab</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoSetDataPathBox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">autoSetDataPath</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">userDataPathText</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">dataPath</span><span class="p">)</span>

        <span class="c1"># populate ValidateFrame</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validateFrame</span><span class="o">.</span><span class="n">_populate</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">regionPaddingData</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%.1f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">stripRegionPadding</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dropFactorData</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%.1f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">peakDropFactor</span><span class="p">)))</span>

        <span class="n">volumeIntegralLimit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">volumeIntegralLimit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">volumeIntegralLimitData</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">volumeIntegralLimit</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">peakFittingMethod</span><span class="o">.</span><span class="n">setIndex</span><span class="p">(</span><span class="n">PEAKFITTINGDEFAULTS</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">peakFittingMethod</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showToolbarBox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">showToolbar</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spectrumBorderBox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">showSpectrumBorder</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showGridBox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">showGrid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showCrosshairBox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">showCrosshair</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showDoubleCrosshairBox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">showDoubleCrosshair</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showLastAxisOnlyBox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">lastAxisOnly</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">matchAxisCode</span><span class="o">.</span><span class="n">setIndex</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">matchAxisCode</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axisOrderingOptions</span><span class="o">.</span><span class="n">setIndex</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">axisOrderingOptions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoomCentre</span><span class="o">.</span><span class="n">setIndex</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">zoomCentreType</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoomPercentData</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">zoomPercent</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stripWidthZoomPercentData</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">stripWidthZoomPercent</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defaultAspectRatioBox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">useDefaultAspectRatio</span><span class="p">)</span>

        <span class="c1"># NOTE: ED this seems a little awkward</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aspectLabel</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aspectData</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_removeWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">aspectLabelFrame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_removeWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">aspectDataFrame</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">ii</span><span class="p">,</span> <span class="n">aspect</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">aspectRatios</span><span class="o">.</span><span class="n">keys</span><span class="p">())):</span>
            <span class="n">aspectValue</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">aspectRatios</span><span class="p">[</span><span class="n">aspect</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">aspectLabel</span><span class="p">[</span><span class="n">aspect</span><span class="p">]</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">aspectLabelFrame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">aspect</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">ii</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">hAlign</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">aspectData</span><span class="p">[</span><span class="n">aspect</span><span class="p">]</span> <span class="o">=</span> <span class="n">ScientificDoubleSpinBox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">aspectDataFrame</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">ii</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">hAlign</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">aspectData</span><span class="p">[</span><span class="n">aspect</span><span class="p">]</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">aspectValue</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">aspectData</span><span class="p">[</span><span class="n">aspect</span><span class="p">]</span><span class="o">.</span><span class="n">setMinimumWidth</span><span class="p">(</span><span class="n">LineEditsMinimumWidth</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">aspect</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">_baseAspectRatioAxisCode</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">aspectData</span><span class="p">[</span><span class="n">aspect</span><span class="p">]</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">aspectData</span><span class="p">[</span><span class="n">aspect</span><span class="p">]</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">aspectData</span><span class="p">[</span><span class="n">aspect</span><span class="p">]</span><span class="o">.</span><span class="n">valueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueSetAspect</span><span class="p">,</span> <span class="n">aspect</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">showZoomXLimitApplyBox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">zoomXLimitApply</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showZoomYLimitApplyBox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">zoomYLimitApply</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showIntensityLimitBox</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">intensityLimit</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">annotationsData</span><span class="o">.</span><span class="n">setIndex</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">annotationType</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">symbol</span><span class="o">.</span><span class="n">setIndex</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">symbolType</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">symbolSizePixelData</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">symbolSizePixel</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">symbolThicknessData</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">symbolThickness</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">contourThicknessData</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">contourThickness</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoCorrectBox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">autoCorrectColours</span><span class="p">)</span>
        <span class="n">_setColourPulldown</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">marksDefaultColourBox</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">defaultMarksColour</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showSideBandsData</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">numSideBands</span><span class="p">))</span>

        <span class="n">multipletAveraging</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">multipletAveraging</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">multipletAveraging</span><span class="o">.</span><span class="n">setIndex</span><span class="p">(</span><span class="n">MULTIPLETAVERAGINGTYPES</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">multipletAveraging</span><span class="p">)</span> <span class="k">if</span> <span class="n">multipletAveraging</span> <span class="ow">in</span> <span class="n">MULTIPLETAVERAGINGTYPES</span> <span class="k">else</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">singleContoursBox</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">generateSinglePlaneContours</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_populateExternalProgramsTab</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Populate the widgets in the externalProgramsTab</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pymolPath</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">externalPrograms</span><span class="o">.</span><span class="n">pymol</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setSpectrumTabWidgets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Insert a widget in here to appear in the Spectrum Tab. Parent = the Frame obj where the widget should live</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">row</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoSetDataPathLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Auto Set dataPath: &quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoSetDataPathBox</span> <span class="o">=</span> <span class="n">CheckBox</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>  <span class="c1">#, checked=self.preferences.general.autoSetDataPath)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoSetDataPathBox</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueToggleGeneralOptions</span><span class="p">,</span> <span class="s1">&#39;autoSetDataPath&#39;</span><span class="p">))</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">userDataPathLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="s2">&quot;User Data Path&quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">userDataPathText</span> <span class="o">=</span> <span class="n">PathEdit</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">vAlign</span><span class="o">=</span><span class="s1">&#39;t&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">userDataPathText</span><span class="o">.</span><span class="n">setMinimumWidth</span><span class="p">(</span><span class="n">LineEditsMinimumWidth</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">userDataPathText</span><span class="o">.</span><span class="n">textChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueSetUserDataPath</span><span class="p">)</span>
        <span class="c1"># self.userDataPathText.setText(self.preferences.general.dataPath)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">userDataPathButton</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_getUserDataPath</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s1">&#39;icons/directory&#39;</span><span class="p">,</span>
                                         <span class="n">hPolicy</span><span class="o">=</span><span class="s1">&#39;fixed&#39;</span><span class="p">)</span>

        <span class="c1"># add validate frame</span>
        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validateFrame</span> <span class="o">=</span> <span class="n">ValidateSpectraForPreferences</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">mainWindow</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">,</span> <span class="n">spectra</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">project</span><span class="o">.</span><span class="n">spectra</span><span class="p">,</span>
                                                            <span class="n">setLayout</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">showBorder</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">gridSpan</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_validateFrame</span><span class="o">.</span><span class="n">_filePathCallback</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_queueSetValidateFilePath</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validateFrame</span><span class="o">.</span><span class="n">_dataUrlCallback</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_queueSetValidateDataUrl</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validateFrame</span><span class="o">.</span><span class="n">_matchDataUrlWidths</span> <span class="o">=</span> <span class="n">parent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validateFrame</span><span class="o">.</span><span class="n">_matchFilePathWidths</span> <span class="o">=</span> <span class="n">parent</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_validateFrame</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="c1"># row += 1</span>
        <span class="c1"># self._dataUrlData = {}</span>
        <span class="c1"># self.userDataPathLabel = Label(parent, &quot;$DATA (user datapath)&quot;, grid=(row, 0), )</span>
        <span class="c1"># self.userDataPathText = PathEdit(parent, grid=(row, 1), vAlign=&#39;t&#39;)</span>
        <span class="c1"># self.userDataPathText.setMinimumWidth(LineEditsMinimumWidth)</span>
        <span class="c1"># self.userDataPathText.textChanged.connect(self._queueSetUserDataPath)</span>
        <span class="c1">#</span>
        <span class="c1"># # if self.project:</span>
        <span class="c1"># #     urls = _findDataUrl(self, &#39;remoteData&#39;)</span>
        <span class="c1"># #     if urls and urls[0]:</span>
        <span class="c1"># #         self.userDataPathText.setValidator(DataUrlValidator(parent=self.userDataPathText, dataUrl=urls[0]))</span>
        <span class="c1"># #         _setUrlData(self, urls[0], self.userDataPathText)</span>
        <span class="c1">#</span>
        <span class="c1"># self.userDataPathText.setText(self.preferences.general.dataPath)</span>
        <span class="c1"># self.userDataPathButton = Button(parent, grid=(row, 2), callback=self._getUserDataPath, icon=&#39;icons/directory&#39;,</span>
        <span class="c1">#                                  hPolicy=&#39;fixed&#39;)</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">regionPaddingLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Spectral Padding (%)&quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">regionPaddingData</span> <span class="o">=</span> <span class="n">DoubleSpinbox</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">hAlign</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">regionPaddingData</span><span class="o">.</span><span class="n">setMinimumWidth</span><span class="p">(</span><span class="n">LineEditsMinimumWidth</span><span class="p">)</span>
        <span class="c1"># self.regionPaddingData.setValue(float(&#39;%.1f&#39; % (100 * self.preferences.general.stripRegionPadding)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">regionPaddingData</span><span class="o">.</span><span class="n">valueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueSetRegionPadding</span><span class="p">)</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dropFactorLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Peak Picking Drop (%)&quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dropFactorData</span> <span class="o">=</span> <span class="n">DoubleSpinbox</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">hAlign</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dropFactorData</span><span class="o">.</span><span class="n">setMinimumWidth</span><span class="p">(</span><span class="n">LineEditsMinimumWidth</span><span class="p">)</span>
        <span class="c1"># self.dropFactorData.setValue(float(&#39;%.1f&#39; % (100 * self.preferences.general.peakDropFactor)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dropFactorData</span><span class="o">.</span><span class="n">valueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueSetDropFactor</span><span class="p">)</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">volumeIntegralLimit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">volumeIntegralLimit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">volumeIntegralLimitLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Volume Integral Limit&quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">volumeIntegralLimitData</span> <span class="o">=</span> <span class="n">DoubleSpinbox</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                                                     <span class="nb">min</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">hAlign</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">)</span>
        <span class="c1"># self.volumeIntegralLimitData.setValue(int(volumeIntegralLimit))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">volumeIntegralLimitData</span><span class="o">.</span><span class="n">setMinimumWidth</span><span class="p">(</span><span class="n">LineEditsMinimumWidth</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">volumeIntegralLimitData</span><span class="o">.</span><span class="n">valueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueSetVolumeIntegralLimit</span><span class="p">)</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">peakFittingMethodLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Peak Region Fitting Method&quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="n">peakFittingMethod</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">peakFittingMethod</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">peakFittingMethod</span> <span class="o">=</span> <span class="n">RadioButtons</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">texts</span><span class="o">=</span><span class="n">PEAKFITTINGDEFAULTS</span><span class="p">,</span>
                                              <span class="c1"># selectedInd=PEAKFITTINGDEFAULTS.index(peakFittingMethod),</span>
                                              <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueSetPeakFittingMethod</span><span class="p">,</span>
                                              <span class="n">direction</span><span class="o">=</span><span class="s1">&#39;h&#39;</span><span class="p">,</span>
                                              <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">hAlign</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">,</span>
                                              <span class="n">tipTexts</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                              <span class="p">)</span>

        <span class="c1">### Not fully Tested, Had some issues with $Path routines in setting the path of the copied spectra.</span>
        <span class="c1">###  Needs more testing for different spectra formats etc. Disabled until completion.</span>
        <span class="c1"># row += 1</span>
        <span class="c1"># self.keepSPWithinProjectTipText = &#39;Keep a copy of spectra inside the project directory. Useful when changing the original spectra location path&#39;</span>
        <span class="c1"># self.keepSPWithinProject = Label(parent, text=&quot;Keep a Copy Inside Project: &quot;, grid=(row, 0))</span>
        <span class="c1"># self.keepSPWithinProjectBox = CheckBox(parent, grid=(row, 1), checked=self.preferences.general.keepSpectraInsideProject,</span>
        <span class="c1">#                                        tipText=self.keepSPWithinProjectTipText)</span>
        <span class="c1"># self.keepSPWithinProjectBox.toggled.connect(partial(self._queueToggleGeneralOptions, &#39;keepSpectraInsideProject&#39;))</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showToolbarLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Show ToolBar(s): &quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showToolbarBox</span> <span class="o">=</span> <span class="n">CheckBox</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>  <span class="c1">#, checked=self.preferences.general.showToolbar)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showToolbarBox</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueToggleGeneralOptions</span><span class="p">,</span> <span class="s1">&#39;showToolbar&#39;</span><span class="p">))</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spectrumBorderLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Show Spectrum Borders: &quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spectrumBorderBox</span> <span class="o">=</span> <span class="n">CheckBox</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>  <span class="c1">#, checked=self.preferences.general.showSpectrumBorder)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spectrumBorderBox</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueToggleGeneralOptions</span><span class="p">,</span> <span class="s1">&#39;showSpectrumBorder&#39;</span><span class="p">))</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showGridLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Show Grids: &quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showGridBox</span> <span class="o">=</span> <span class="n">CheckBox</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>  <span class="c1">#, checked=self.preferences.general.showGrid)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showGridBox</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueToggleGeneralOptions</span><span class="p">,</span> <span class="s1">&#39;showGrid&#39;</span><span class="p">))</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showCrosshairLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Show Crosshairs: &quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showCrosshairBox</span> <span class="o">=</span> <span class="n">CheckBox</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>  <span class="c1">#, checked=self.preferences.general.showCrosshair)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showCrosshairBox</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueToggleGeneralOptions</span><span class="p">,</span> <span class="s1">&#39;showCrosshair&#39;</span><span class="p">))</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showDoubleCrosshairLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;    - and Double Crosshairs: &quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showDoubleCrosshairBox</span> <span class="o">=</span> <span class="n">CheckBox</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>  <span class="c1">#, checked=self.preferences.general.showDoubleCrosshair)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showDoubleCrosshairBox</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueToggleGeneralOptions</span><span class="p">,</span> <span class="s1">&#39;showDoubleCrosshair&#39;</span><span class="p">))</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showGridLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Show SpinningRate SideBands: &quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showGridBox</span> <span class="o">=</span> <span class="n">CheckBox</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>  <span class="c1">#, checked=self.preferences.general.showGrid)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showGridBox</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueToggleGeneralOptions</span><span class="p">,</span> <span class="s1">&#39;showSideBands&#39;</span><span class="p">))</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showLastAxisOnlyLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Share Y Axis: &quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showLastAxisOnlyBox</span> <span class="o">=</span> <span class="n">CheckBox</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>  <span class="c1">#, checked=self.preferences.general.lastAxisOnly)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showLastAxisOnlyBox</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueToggleGeneralOptions</span><span class="p">,</span> <span class="s1">&#39;lastAxisOnly&#39;</span><span class="p">))</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">matchAxisCodeLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Match Axis Codes&quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="c1"># matchAxisCode = self.preferences.general.matchAxisCode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">matchAxisCode</span> <span class="o">=</span> <span class="n">RadioButtons</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">texts</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Atom Type&#39;</span><span class="p">,</span> <span class="s1">&#39;Full Axis Code&#39;</span><span class="p">],</span>
                                          <span class="c1"># selectedInd=matchAxisCode,</span>
                                          <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueSetMatchAxisCode</span><span class="p">,</span>
                                          <span class="n">direction</span><span class="o">=</span><span class="s1">&#39;h&#39;</span><span class="p">,</span>
                                          <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">hAlign</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">,</span>
                                          <span class="n">tipTexts</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                          <span class="p">)</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axisOrderingOptionsLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Axis Ordering&quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="c1"># axisOrderingOptions = self.preferences.general.axisOrderingOptions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axisOrderingOptions</span> <span class="o">=</span> <span class="n">RadioButtons</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">texts</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Use Spectrum Settings&#39;</span><span class="p">,</span> <span class="s1">&#39;Always Ask&#39;</span><span class="p">],</span>
                                                <span class="c1"># selectedInd=axisOrderingOptions,</span>
                                                <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueSetAxisOrderingOptions</span><span class="p">,</span>
                                                <span class="n">direction</span><span class="o">=</span><span class="s1">&#39;h&#39;</span><span class="p">,</span>
                                                <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">hAlign</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">,</span>
                                                <span class="n">tipTexts</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                                <span class="p">)</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">HLine</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">gridSpan</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">colour</span><span class="o">=</span><span class="n">getColours</span><span class="p">()[</span><span class="n">DIVIDER</span><span class="p">],</span> <span class="n">height</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>

        <span class="c1"># row += 1</span>
        <span class="c1">#self.showDoubleCursorLabel = Label(parent, text=&quot;Show Double Cursor: &quot;, grid=(row, 0))</span>
        <span class="c1">#self.showDoubleCursorBox = CheckBox(parent, grid=(row, 1), tipText=NotImplementedTipText)#, checked=self.preferences.general.showDoubleCursor)</span>
        <span class="c1"># TODO enable DoubleCursor</span>
        <span class="c1">#self.showDoubleCursorBox.setDisabled(True)</span>
        <span class="c1">## self.showDoubleCursorBox.toggled.connect(partial(self._queueToggleGeneralOptions, &#39;showDoubleCursor&#39;))</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoomCentreLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Zoom Centre&quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="c1"># zoomCentre = self.preferences.general.zoomCentreType</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoomCentre</span> <span class="o">=</span> <span class="n">RadioButtons</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">texts</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Mouse&#39;</span><span class="p">,</span> <span class="s1">&#39;Screen&#39;</span><span class="p">],</span>
                                       <span class="c1"># selectedInd=zoomCentre,</span>
                                       <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueSetZoomCentre</span><span class="p">,</span>
                                       <span class="n">direction</span><span class="o">=</span><span class="s1">&#39;h&#39;</span><span class="p">,</span>
                                       <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">hAlign</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">,</span>
                                       <span class="n">tipTexts</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                       <span class="p">)</span>
        <span class="c1"># self.zoomCentre.setEnabled(False)</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="c1"># zoomPercent = self.preferences.general.zoomPercent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoomPercentLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Manual Zoom (%)&quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoomPercentData</span> <span class="o">=</span> <span class="n">DoubleSpinbox</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                             <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">hAlign</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">)</span>
        <span class="c1"># self.zoomPercentData.setValue(int(zoomPercent))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoomPercentData</span><span class="o">.</span><span class="n">setMinimumWidth</span><span class="p">(</span><span class="n">LineEditsMinimumWidth</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoomPercentData</span><span class="o">.</span><span class="n">valueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueSetZoomPercent</span><span class="p">)</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="c1"># stripWidthZoomPercent = self.preferences.general.stripWidthZoomPercent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stripWidthZoomPercentLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Strip Width Zoom (%)&quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stripWidthZoomPercentData</span> <span class="o">=</span> <span class="n">DoubleSpinbox</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                                       <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">hAlign</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">)</span>
        <span class="c1"># self.stripWidthZoomPercentData.setValue(int(stripWidthZoomPercent))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stripWidthZoomPercentData</span><span class="o">.</span><span class="n">setMinimumWidth</span><span class="p">(</span><span class="n">LineEditsMinimumWidth</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stripWidthZoomPercentData</span><span class="o">.</span><span class="n">valueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueSetStripWidthZoomPercent</span><span class="p">)</span>

        <span class="c1"># row += 1</span>
        <span class="c1"># self.matchAxisCodeLabel = Label(parent, text=&quot;Match Axis Codes&quot;, grid=(row, 0))</span>
        <span class="c1"># matchAxisCode = self.preferences.general.matchAxisCode</span>
        <span class="c1"># self.matchAxisCode = RadioButtons(parent, texts=[&#39;Atom Type&#39;, &#39;Full Axis Code&#39;],</span>
        <span class="c1">#                                 selectedInd=matchAxisCode,</span>
        <span class="c1">#                                 callback=self._setMatchAxisCode,</span>
        <span class="c1">#                                 direction=&#39;v&#39;,</span>
        <span class="c1">#                                 grid=(row, 1), hAlign=&#39;l&#39;,</span>
        <span class="c1">#                                 tipTexts=None,</span>
        <span class="c1">#                                 )</span>

        <span class="c1"># row += 1</span>
        <span class="c1"># self.showGridLabel = Label(parent, text=&quot;Show Grids: &quot;, grid=(row, 0))</span>
        <span class="c1"># self.showGridBox = CheckBox(parent, grid=(row, 1), checked=self.preferences.general.showGrid)</span>
        <span class="c1"># self.showGridBox.toggled.connect(partial(self._queueToggleGeneralOptions, &#39;showGrid&#39;))</span>
        <span class="c1">#</span>
        <span class="c1"># row += 1</span>
        <span class="c1"># self.showLastAxisOnlyLabel = Label(parent, text=&quot;Share Y Axis: &quot;, grid=(row, 0))</span>
        <span class="c1"># self.showLastAxisOnlyBox = CheckBox(parent, grid=(row, 1), checked=self.preferences.general.lastAxisOnly)</span>
        <span class="c1"># self.showLastAxisOnlyBox.toggled.connect(partial(self._queueToggleGeneralOptions, &#39;lastAxisOnly&#39;))</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defaultAspectRatioLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Fixed Aspect Ratios: &quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defaultAspectRatioBox</span> <span class="o">=</span> <span class="n">CheckBox</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>        <span class="c1">#, checked=self.preferences.general.useDefaultAspectRatio)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defaultAspectRatioBox</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueToggleGeneralOptions</span><span class="p">,</span> <span class="s1">&#39;useDefaultAspectRatio&#39;</span><span class="p">))</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aspectLabel</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aspectData</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aspectLabelFrame</span> <span class="o">=</span> <span class="n">Frame</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">setLayout</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">showBorder</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aspectDataFrame</span> <span class="o">=</span> <span class="n">Frame</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">setLayout</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">showBorder</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>

        <span class="c1"># for aspect in sorted(self.preferences.general.aspectRatios.keys()):</span>
        <span class="c1">#     # aspectValue = self.preferences.general.aspectRatios[aspect]</span>
        <span class="c1">#     self.aspectLabel[aspect] = Label(parent, text=aspect, grid=(row, 0), hAlign=&#39;r&#39;)</span>
        <span class="c1">#     self.aspectData[aspect] = ScientificDoubleSpinBox(parent,  #step=1,</span>
        <span class="c1">#                                                       min=1, grid=(row, 1), hAlign=&#39;l&#39;)</span>
        <span class="c1">#     # self.aspectData[aspect].setValue(aspectValue)</span>
        <span class="c1">#     self.aspectData[aspect].setMinimumWidth(LineEditsMinimumWidth)</span>
        <span class="c1">#     self.aspectData[aspect].valueChanged.connect(partial(self._queueSetAspect, aspect))</span>
        <span class="c1">#     row += 1</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showZoomXLimitApplyLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Apply Zoom limit to X axis: &quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showZoomXLimitApplyBox</span> <span class="o">=</span> <span class="n">CheckBox</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>  <span class="c1">#, checked=self.preferences.general.zoomXLimitApply)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showZoomXLimitApplyBox</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueToggleGeneralOptions</span><span class="p">,</span> <span class="s1">&#39;zoomXLimitApply&#39;</span><span class="p">))</span>

        <span class="c1"># self._toggleGeneralOptions(&#39;zoomXLimitApply&#39;, True)</span>
        <span class="c1"># self.showZoomXLimitApplyBox.setChecked(True)</span>
        <span class="c1"># self.showZoomXLimitApplyBox.setEnabled(False)</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showZoomYLimitApplyLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Apply Zoom limit to Y axis: &quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showZoomYLimitApplyBox</span> <span class="o">=</span> <span class="n">CheckBox</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>  <span class="c1">#, checked=self.preferences.general.zoomYLimitApply)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showZoomYLimitApplyBox</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueToggleGeneralOptions</span><span class="p">,</span> <span class="s1">&#39;zoomYLimitApply&#39;</span><span class="p">))</span>

        <span class="c1"># self._toggleGeneralOptions(&#39;zoomYLimitApply&#39;, True)</span>
        <span class="c1"># self.showZoomYLimitApplyBox.setChecked(True)</span>
        <span class="c1"># self.showZoomYLimitApplyBox.setEnabled(False)</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="c1"># intensityLimit = self.preferences.general.intensityLimit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showIntensityLimitLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Minimum Intensity Limit&#39;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">hAlign</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showIntensityLimitBox</span> <span class="o">=</span> <span class="n">ScientificDoubleSpinBox</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span>  <span class="c1">#step=1,</span>
                                                             <span class="nb">min</span><span class="o">=</span><span class="mf">1e-6</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">hAlign</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">)</span>
        <span class="c1"># self.showIntensityLimitBox.setValue(intensityLimit)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showIntensityLimitBox</span><span class="o">.</span><span class="n">setMinimumWidth</span><span class="p">(</span><span class="n">LineEditsMinimumWidth</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showIntensityLimitBox</span><span class="o">.</span><span class="n">valueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueSetIntensityLimit</span><span class="p">)</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">HLine</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">gridSpan</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">colour</span><span class="o">=</span><span class="n">getColours</span><span class="p">()[</span><span class="n">DIVIDER</span><span class="p">],</span> <span class="n">height</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="c1"># numSideBands = self.preferences.general.numSideBands</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showSideBands</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Number of SpinningRate SideBands:&#39;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">hAlign</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showSideBandsData</span> <span class="o">=</span> <span class="n">DoubleSpinbox</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">hAlign</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="c1"># self.showSideBandsData.setValue(int(numSideBands))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showSideBandsData</span><span class="o">.</span><span class="n">setMinimumWidth</span><span class="p">(</span><span class="n">LineEditsMinimumWidth</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showSideBandsData</span><span class="o">.</span><span class="n">valueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueSetNumSideBands</span><span class="p">)</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">HLine</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">gridSpan</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">colour</span><span class="o">=</span><span class="n">getColours</span><span class="p">()[</span><span class="n">DIVIDER</span><span class="p">],</span> <span class="n">height</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">annotationsLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Peak Annotations&quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="c1"># try:</span>
        <span class="c1">#     annType = self.preferences.general.annotationType</span>
        <span class="c1"># except:</span>
        <span class="c1">#     annType = 0</span>
        <span class="c1">#     self.preferences.general.annotationType = annType</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">annotationsData</span> <span class="o">=</span> <span class="n">RadioButtons</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">texts</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Short&#39;</span><span class="p">,</span> <span class="s1">&#39;Full&#39;</span><span class="p">,</span> <span class="s1">&#39;Pid&#39;</span><span class="p">,</span> <span class="s1">&#39;Minimal&#39;</span><span class="p">,</span> <span class="s1">&#39;Peak Id&#39;</span><span class="p">],</span>
                                            <span class="c1"># selectedInd=annType,</span>
                                            <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueSetAnnotations</span><span class="p">,</span>
                                            <span class="n">direction</span><span class="o">=</span><span class="s1">&#39;horizontal&#39;</span><span class="p">,</span>
                                            <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">hAlign</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">,</span>
                                            <span class="n">tipTexts</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                            <span class="p">)</span>
        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">symbolsLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Symbols&quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="c1"># symbol = self.preferences.general.symbolType</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">symbol</span> <span class="o">=</span> <span class="n">RadioButtons</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">texts</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Cross&#39;</span><span class="p">,</span> <span class="s1">&#39;lineWidths&#39;</span><span class="p">,</span> <span class="s1">&#39;Filled lineWidths&#39;</span><span class="p">,</span> <span class="s1">&#39;Plus&#39;</span><span class="p">],</span>
                                   <span class="c1"># selectedInd=symbol,</span>
                                   <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueSetSymbol</span><span class="p">,</span>
                                   <span class="n">direction</span><span class="o">=</span><span class="s1">&#39;h&#39;</span><span class="p">,</span>
                                   <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">hAlign</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">,</span>
                                   <span class="n">tipTexts</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                   <span class="p">)</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">symbolSizePixelLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Symbol Size (pixels)&quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">symbolSizePixelData</span> <span class="o">=</span> <span class="n">Spinbox</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                           <span class="nb">min</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">hAlign</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">symbolSizePixelData</span><span class="o">.</span><span class="n">setMinimumWidth</span><span class="p">(</span><span class="n">LineEditsMinimumWidth</span><span class="p">)</span>
        <span class="c1"># symbolSizePixel = self.preferences.general.symbolSizePixel</span>
        <span class="c1"># self.symbolSizePixelData.setValue(float(&#39;%i&#39; % symbolSizePixel))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">symbolSizePixelData</span><span class="o">.</span><span class="n">valueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueSetSymbolSizePixel</span><span class="p">)</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">symbolThicknessLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Symbol Thickness (points)&quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">symbolThicknessData</span> <span class="o">=</span> <span class="n">Spinbox</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                           <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">hAlign</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">symbolThicknessData</span><span class="o">.</span><span class="n">setMinimumWidth</span><span class="p">(</span><span class="n">LineEditsMinimumWidth</span><span class="p">)</span>
        <span class="c1"># symbolThickness = self.preferences.general.symbolThickness</span>
        <span class="c1"># self.symbolThicknessData.setValue(int(symbolThickness))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">symbolThicknessData</span><span class="o">.</span><span class="n">valueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueSetSymbolThickness</span><span class="p">)</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">contourThicknessLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Contour Thickness (points)&quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">contourThicknessData</span> <span class="o">=</span> <span class="n">Spinbox</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                            <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">hAlign</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">contourThicknessData</span><span class="o">.</span><span class="n">setMinimumWidth</span><span class="p">(</span><span class="n">LineEditsMinimumWidth</span><span class="p">)</span>
        <span class="c1"># contourThickness = self.preferences.general.contourThickness</span>
        <span class="c1"># self.contourThicknessData.setValue(int(contourThickness))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">contourThicknessData</span><span class="o">.</span><span class="n">valueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueSetContourThickness</span><span class="p">)</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">HLine</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">gridSpan</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">colour</span><span class="o">=</span><span class="n">getColours</span><span class="p">()[</span><span class="n">DIVIDER</span><span class="p">],</span> <span class="n">height</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoCorrectLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Autocorrect Colours: &quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoCorrectBox</span> <span class="o">=</span> <span class="n">CheckBox</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>  <span class="c1">#, checked=self.preferences.general.autoCorrectColours)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">autoCorrectBox</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueToggleGeneralOptions</span><span class="p">,</span> <span class="s1">&#39;autoCorrectColours&#39;</span><span class="p">))</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">marksDefaultColourLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Default Marks Colour:&quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">marksDefaultColourBox</span> <span class="o">=</span> <span class="n">PulldownList</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">vAlign</span><span class="o">=</span><span class="s1">&#39;t&#39;</span><span class="p">)</span>

        <span class="c1"># populate colour pulldown and set to the current colour</span>
        <span class="n">fillColourPulldown</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">marksDefaultColourBox</span><span class="p">,</span> <span class="n">allowAuto</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">marksDefaultColourBox</span><span class="o">.</span><span class="n">currentIndexChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueChangeMarksColourIndex</span><span class="p">)</span>

        <span class="c1"># add a colour dialog button</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">marksDefaultColourButton</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">vAlign</span><span class="o">=</span><span class="s1">&#39;t&#39;</span><span class="p">,</span> <span class="n">hAlign</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">,</span>
                                               <span class="n">icon</span><span class="o">=</span><span class="s1">&#39;icons/colours&#39;</span><span class="p">,</span> <span class="n">hPolicy</span><span class="o">=</span><span class="s1">&#39;fixed&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">marksDefaultColourButton</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueChangeMarksColourButton</span><span class="p">)</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">HLine</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">gridSpan</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">colour</span><span class="o">=</span><span class="n">getColours</span><span class="p">()[</span><span class="n">DIVIDER</span><span class="p">],</span> <span class="n">height</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">multipletAveragingLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Multiplet Averaging:&quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="c1"># multipletAveraging = self.preferences.general.multipletAveraging</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">multipletAveraging</span> <span class="o">=</span> <span class="n">RadioButtons</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">texts</span><span class="o">=</span><span class="n">MULTIPLETAVERAGINGTYPES</span><span class="p">,</span>
                                               <span class="c1"># selectedInd=MULTIPLETAVERAGINGTYPES.index(</span>
                                               <span class="c1">#         multipletAveraging) if multipletAveraging in MULTIPLETAVERAGINGTYPES else 0,</span>
                                               <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueSetMultipletAveraging</span><span class="p">,</span>
                                               <span class="n">direction</span><span class="o">=</span><span class="s1">&#39;h&#39;</span><span class="p">,</span>
                                               <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">hAlign</span><span class="o">=</span><span class="s1">&#39;l&#39;</span><span class="p">,</span>
                                               <span class="n">tipTexts</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                               <span class="p">)</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">HLine</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">gridSpan</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">colour</span><span class="o">=</span><span class="n">getColours</span><span class="p">()[</span><span class="n">DIVIDER</span><span class="p">],</span> <span class="n">height</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>

        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">singleContoursLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Generate Single Contours</span><span class="se">\n</span><span class="s2">   per Plane: &quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">singleContoursBox</span> <span class="o">=</span> <span class="n">CheckBox</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>  <span class="c1">#, checked=self.preferences.general.generateSinglePlaneContours)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">singleContoursBox</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueToggleGeneralOptions</span><span class="p">,</span> <span class="s1">&#39;generateSinglePlaneContours&#39;</span><span class="p">))</span>

        <span class="c1"># add spacer to stop columns changing width</span>
        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">Spacer</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span>
               <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">MinimumExpanding</span><span class="p">,</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">MinimumExpanding</span><span class="p">,</span>
               <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">gridSpan</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>

    <span class="nd">@queueStateChange</span><span class="p">(</span><span class="n">_verifyPopupApply</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_queueChangeMarksColourIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">list</span><span class="p">(</span><span class="n">spectrumColours</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="n">value</span><span class="p">]</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">defaultMarksColour</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_changeMarksColourIndex</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_changeMarksColourIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Change the default maerks colour in the preferences</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">newColour</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">spectrumColours</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="nb">list</span><span class="p">(</span><span class="n">spectrumColours</span><span class="o">.</span><span class="n">values</span><span class="p">())</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">colourNameNoSpace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">marksDefaultColourBox</span><span class="o">.</span><span class="n">currentText</span><span class="p">()))]</span>
        <span class="k">if</span> <span class="n">newColour</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">defaultMarksColour</span> <span class="o">=</span> <span class="n">newColour</span>

    <span class="k">def</span> <span class="nf">_queueChangeMarksColourButton</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;set the default marks colour from the colour dialog</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dialog</span> <span class="o">=</span> <span class="n">ColourDialog</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">newColour</span> <span class="o">=</span> <span class="n">dialog</span><span class="o">.</span><span class="n">getColor</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">newColour</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">addNewColour</span><span class="p">(</span><span class="n">newColour</span><span class="p">)</span>
            <span class="n">fillColourPulldown</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">marksDefaultColourBox</span><span class="p">,</span> <span class="n">allowAuto</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">marksDefaultColourBox</span><span class="o">.</span><span class="n">setCurrentText</span><span class="p">(</span><span class="n">spectrumColours</span><span class="p">[</span><span class="n">newColour</span><span class="o">.</span><span class="n">name</span><span class="p">()])</span>

    <span class="k">def</span> <span class="nf">_setExternalProgramsTabWidgets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Insert a widget in here to appear in the externalPrograms Tab</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">row</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pymolPathLabel</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="s2">&quot;Pymol Path&quot;</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pymolPath</span> <span class="o">=</span> <span class="n">PathEdit</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">hAlign</span><span class="o">=</span><span class="s1">&#39;t&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pymolPath</span><span class="o">.</span><span class="n">setMinimumWidth</span><span class="p">(</span><span class="n">LineEditsMinimumWidth</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pymolPath</span><span class="o">.</span><span class="n">textChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queueSetPymolPath</span><span class="p">)</span>
        <span class="c1"># self.pymolPath.setText(self.preferences.externalPrograms.pymol)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pymolPathButton</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_getPymolPath</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s1">&#39;icons/directory&#39;</span><span class="p">,</span>
                                      <span class="n">hPolicy</span><span class="o">=</span><span class="s1">&#39;fixed&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">testPymolPathButton</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_testPymol</span><span class="p">,</span>
                                          <span class="n">text</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="n">hPolicy</span><span class="o">=</span><span class="s1">&#39;fixed&#39;</span><span class="p">)</span>

        <span class="c1"># add spacer to stop columns changing width</span>
        <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">Spacer</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span>
               <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">Expanding</span><span class="p">,</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QSizePolicy</span><span class="o">.</span><span class="n">MinimumExpanding</span><span class="p">,</span>
               <span class="n">grid</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">gridSpan</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_testPymol</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">program</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pymolPath</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_testExternalProgram</span><span class="p">(</span><span class="n">program</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sender</span><span class="p">()</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s1">&#39;Failed&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sender</span><span class="p">()</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s1">&#39;Success&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_testExternalProgram</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">program</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">subprocess</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># TODO:ED check whether relative or absolute path and test</span>
            <span class="c1"># import ccpn.framework.PathsAndUrls as PAU</span>
            <span class="c1"># pathCwd = PAU.ccpnCodePath</span>
            <span class="c1"># programPath = os.path.abspath(os.path.join(pathCwd, program))</span>

            <span class="n">p</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span><span class="n">program</span><span class="p">,</span>
                                 <span class="n">shell</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                                 <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
                                 <span class="n">stderr</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">getLogger</span><span class="p">()</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;Testing External program: Failed.&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="c1"># def _getDataPath(self):</span>
    <span class="c1">#     if os.path.exists(&#39;/&#39;.join(self.userDataPathText.text().split(&#39;/&#39;)[:-1])):</span>
    <span class="c1">#         currentDataPath = &#39;/&#39;.join(self.userDataPathText.text().split(&#39;/&#39;)[:-1])</span>
    <span class="c1">#     else:</span>
    <span class="c1">#         currentDataPath = os.path.expanduser(&#39;~&#39;)</span>
    <span class="c1">#     dialog = FileDialog(self, text=&#39;Select Data File&#39;, directory=currentDataPath, fileMode=2, acceptMode=0,</span>
    <span class="c1">#                         preferences=self.preferences.general)</span>
    <span class="c1">#     directory = dialog.selectedFiles()</span>
    <span class="c1">#     if directory:</span>
    <span class="c1">#         self.userDataPathText.setText(directory[0])</span>
    <span class="c1">#         self.preferences.general.dataPath = directory[0]</span>
    <span class="c1">#</span>
    <span class="c1"># def _setDataPath(self):</span>
    <span class="c1">#     if self.userDataPathText.isModified():</span>
    <span class="c1">#         newPath = self.userDataPathText.text().strip()</span>
    <span class="c1">#</span>
    <span class="c1">#         self.preferences.general.dataPath = newPath     # do we need this?</span>
    <span class="c1">#</span>
    <span class="c1">#         dataUrl = self.project._apiNmrProject.root.findFirstDataLocationStore(</span>
    <span class="c1">#                 name=&#39;standard&#39;).findFirstDataUrl(name=&#39;remoteData&#39;)</span>
    <span class="c1">#         dataUrl.url = Implementation.Url(path=newPath)</span>

    <span class="nd">@queueStateChange</span><span class="p">(</span><span class="n">_verifyPopupApply</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_queueSetUserDataPath</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">userDataPathText</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">dataPath</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setUserDataPath</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setUserDataPath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="c1"># newPath = self.userDataPathText.text().strip()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">dataPath</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">_getUserDataPath</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">userDataPathText</span><span class="o">.</span><span class="n">text</span><span class="p">())):</span>
            <span class="n">currentDataPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">userDataPathText</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">currentDataPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s1">&#39;~&#39;</span><span class="p">)</span>
        <span class="n">dialog</span> <span class="o">=</span> <span class="n">FileDialog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Select User Working File&#39;</span><span class="p">,</span> <span class="n">directory</span><span class="o">=</span><span class="n">currentDataPath</span><span class="p">,</span> <span class="n">fileMode</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">acceptMode</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                            <span class="n">preferences</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="p">)</span>
        <span class="n">directory</span> <span class="o">=</span> <span class="n">dialog</span><span class="o">.</span><span class="n">selectedFiles</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">directory</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">userDataPathText</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">directory</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="c1"># self._setUserDataPath()</span>
            <span class="c1"># self.preferences.general.dataPath = directory[0]</span>

    <span class="nd">@queueStateChange</span><span class="p">(</span><span class="n">_verifyPopupApply</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_queueSetUserWorkingPath</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">userWorkingPathData</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">userWorkingPath</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setUserWorkingPath</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setUserWorkingPath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="c1"># newPath = self.userWorkingData.text()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">userWorkingPath</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">_getUserWorkingPath</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">userWorkingPathData</span><span class="o">.</span><span class="n">text</span><span class="p">())):</span>
            <span class="n">currentDataPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">userWorkingPathData</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">currentDataPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s1">&#39;~&#39;</span><span class="p">)</span>
        <span class="n">dialog</span> <span class="o">=</span> <span class="n">FileDialog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Select Data File&#39;</span><span class="p">,</span> <span class="n">directory</span><span class="o">=</span><span class="n">currentDataPath</span><span class="p">,</span> <span class="n">fileMode</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">acceptMode</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                            <span class="n">preferences</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="p">)</span>
        <span class="n">directory</span> <span class="o">=</span> <span class="n">dialog</span><span class="o">.</span><span class="n">selectedFiles</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">directory</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">userWorkingData</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">directory</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="c1"># self._setUserWorkingPath()</span>
            <span class="c1"># self.preferences.general.userWorkingPath = directory[0]</span>

    <span class="nd">@queueStateChange</span><span class="p">(</span><span class="n">_verifyPopupApply</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_queueSetAuxiliaryFilesPath</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">auxiliaryFilesData</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">auxiliaryFilesPath</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setAuxiliaryFilesPath</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setAuxiliaryFilesPath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="c1"># newPath = self.auxiliaryFilesData.text()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">auxiliaryFilesPath</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">_getAuxiliaryFilesPath</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">auxiliaryFilesData</span><span class="o">.</span><span class="n">text</span><span class="p">())):</span>
            <span class="n">currentDataPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">auxiliaryFilesData</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">currentDataPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s1">&#39;~&#39;</span><span class="p">)</span>
        <span class="n">dialog</span> <span class="o">=</span> <span class="n">FileDialog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Select Data File&#39;</span><span class="p">,</span> <span class="n">directory</span><span class="o">=</span><span class="n">currentDataPath</span><span class="p">,</span> <span class="n">fileMode</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">acceptMode</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                            <span class="n">preferences</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="p">)</span>
        <span class="n">directory</span> <span class="o">=</span> <span class="n">dialog</span><span class="o">.</span><span class="n">selectedFiles</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">directory</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">auxiliaryFilesData</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">directory</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="c1"># self._setAuxiliaryFilesPath()</span>
            <span class="c1"># self.preferences.general.auxiliaryFilesPath = directory[0]</span>

    <span class="nd">@queueStateChange</span><span class="p">(</span><span class="n">_verifyPopupApply</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_queueSetValidateDataUrl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataUrl</span><span class="p">,</span> <span class="n">newUrl</span><span class="p">,</span> <span class="n">urlValid</span><span class="p">,</span> <span class="n">dim</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the new url in the dataUrl</span>
<span class="sd">        dim is required by the decorator to give a unique id for dataUrl row</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">newUrl</span> <span class="o">!=</span> <span class="n">dataUrl</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">path</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_validatePreferencesDataUrl</span><span class="p">,</span> <span class="n">dataUrl</span><span class="p">,</span> <span class="n">newUrl</span><span class="p">,</span> <span class="n">urlValid</span><span class="p">,</span> <span class="n">dim</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_validatePreferencesDataUrl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataUrl</span><span class="p">,</span> <span class="n">newUrl</span><span class="p">,</span> <span class="n">urlValid</span><span class="p">,</span> <span class="n">dim</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Put the new dataUrl into the dataUrl and the preferences.general.dataPath</span>
<span class="sd">        Extra step incase urlValid needs to be checked</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">dim</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1"># must be the first dataUrl for the preferences</span>
            <span class="c1"># self.preferences.general.dataPath = newUrl</span>
            <span class="k">pass</span>

        <span class="c1"># if urlValid:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validateFrame</span><span class="o">.</span><span class="n">dataUrlFunc</span><span class="p">(</span><span class="n">dataUrl</span><span class="p">,</span> <span class="n">newUrl</span><span class="p">)</span>

    <span class="nd">@queueStateChange</span><span class="p">(</span><span class="n">_verifyPopupApply</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_queueSetValidateFilePath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">spectrum</span><span class="p">,</span> <span class="n">filePath</span><span class="p">,</span> <span class="n">dim</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the new filePath for the spectrum</span>
<span class="sd">        dim is required by the decorator to give a unique id for filePath row</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">filePath</span> <span class="o">!=</span> <span class="n">spectrum</span><span class="o">.</span><span class="n">filePath</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_validateFrame</span><span class="o">.</span><span class="n">filePathFunc</span><span class="p">,</span> <span class="n">spectrum</span><span class="p">,</span> <span class="n">filePath</span><span class="p">)</span>

    <span class="nd">@queueStateChange</span><span class="p">(</span><span class="n">_verifyPopupApply</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_queueSetuserLayoutsPath</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">userLayoutsLe</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">userLayoutsPath</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setUserLayoutsPath</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setUserLayoutsPath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="c1"># newPath = self.userLayoutsLe.text()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">userLayoutsPath</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">_getUserLayoutsPath</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">userLayoutsLe</span><span class="o">.</span><span class="n">text</span><span class="p">())):</span>
            <span class="n">currentDataPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">userLayoutsLe</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">currentDataPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s1">&#39;~&#39;</span><span class="p">)</span>
        <span class="n">dialog</span> <span class="o">=</span> <span class="n">FileDialog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Select Data File&#39;</span><span class="p">,</span> <span class="n">directory</span><span class="o">=</span><span class="n">currentDataPath</span><span class="p">,</span> <span class="n">fileMode</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">acceptMode</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                            <span class="n">preferences</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="p">)</span>
        <span class="n">directory</span> <span class="o">=</span> <span class="n">dialog</span><span class="o">.</span><span class="n">selectedFiles</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">directory</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">userLayoutsLe</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">directory</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="c1"># self._setuserLayoutsPath()</span>
            <span class="c1"># self.preferences.general.userLayoutsPath = directory[0]</span>

    <span class="nd">@queueStateChange</span><span class="p">(</span><span class="n">_verifyPopupApply</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_queueSetMacroFilesPath</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">macroPathData</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">userMacroPath</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setMacroFilesPath</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setMacroFilesPath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="c1"># newPath = self.macroPathData.text()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">userMacroPath</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">_getMacroFilesPath</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">macroPathData</span><span class="o">.</span><span class="n">text</span><span class="p">())):</span>
            <span class="n">currentDataPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">macroPathData</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">currentDataPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s1">&#39;~&#39;</span><span class="p">)</span>
        <span class="n">dialog</span> <span class="o">=</span> <span class="n">FileDialog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Select Data File&#39;</span><span class="p">,</span> <span class="n">directory</span><span class="o">=</span><span class="n">currentDataPath</span><span class="p">,</span> <span class="n">fileMode</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">acceptMode</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                            <span class="n">preferences</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="p">)</span>
        <span class="n">directory</span> <span class="o">=</span> <span class="n">dialog</span><span class="o">.</span><span class="n">selectedFiles</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">directory</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">macroPathData</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">directory</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="c1"># self._setMacroFilesPath()</span>
            <span class="c1"># self.preferences.general.userMacroPath = directory[0]</span>

    <span class="nd">@queueStateChange</span><span class="p">(</span><span class="n">_verifyPopupApply</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_queueSetPluginFilesPath</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pluginPathData</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">userPluginPath</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setPluginFilesPath</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setPluginFilesPath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="c1"># newPath = self.pluginPathData.text()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">userPluginPath</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">_getPluginFilesPath</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pluginPathData</span><span class="o">.</span><span class="n">text</span><span class="p">())):</span>
            <span class="n">currentDataPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pluginPathData</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">currentDataPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s1">&#39;~&#39;</span><span class="p">)</span>
        <span class="n">dialog</span> <span class="o">=</span> <span class="n">FileDialog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Select Data File&#39;</span><span class="p">,</span> <span class="n">directory</span><span class="o">=</span><span class="n">currentDataPath</span><span class="p">,</span> <span class="n">fileMode</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">acceptMode</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                            <span class="n">preferences</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="p">)</span>
        <span class="n">directory</span> <span class="o">=</span> <span class="n">dialog</span><span class="o">.</span><span class="n">selectedFiles</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">directory</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pluginPathData</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">directory</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="c1"># self._setPluginFilesPath()</span>
            <span class="c1"># self.preferences.general.pluginMacroPath = directory[0]</span>

    <span class="nd">@queueStateChange</span><span class="p">(</span><span class="n">_verifyPopupApply</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_queueSetPipesFilesPath</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipesPathData</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">userExtensionPath</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setPipesFilesPath</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setPipesFilesPath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="c1"># newPath = self.pipesPathData.text()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">userExtensionPath</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">_getExtensionFilesPath</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pipesPathData</span><span class="o">.</span><span class="n">text</span><span class="p">())):</span>
            <span class="n">currentDataPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pipesPathData</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">currentDataPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s1">&#39;~&#39;</span><span class="p">)</span>
        <span class="n">dialog</span> <span class="o">=</span> <span class="n">FileDialog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Select Data File&#39;</span><span class="p">,</span> <span class="n">directory</span><span class="o">=</span><span class="n">currentDataPath</span><span class="p">,</span> <span class="n">fileMode</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">acceptMode</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                            <span class="n">preferences</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="p">)</span>
        <span class="n">directory</span> <span class="o">=</span> <span class="n">dialog</span><span class="o">.</span><span class="n">selectedFiles</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">directory</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pipesPathData</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">directory</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="c1"># self._setPipesFilesPath()</span>
            <span class="c1"># self.preferences.general.userExtensionPath = directory[0]</span>

    <span class="k">def</span> <span class="nf">_setPipesFilesPath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="c1"># newPath = self.pipesPathData.text()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">userExtensionPath</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@queueStateChange</span><span class="p">(</span><span class="n">_verifyPopupApply</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_queueChangeLanguage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">languages</span><span class="p">[</span><span class="n">value</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">language</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_changeLanguage</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_changeLanguage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">language</span> <span class="o">=</span> <span class="n">value</span>  <span class="c1">#(languages[value])</span>

    <span class="nd">@queueStateChange</span><span class="p">(</span><span class="n">_verifyPopupApply</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_queueChangeColourScheme</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">COLOUR_SCHEMES</span><span class="p">[</span><span class="n">value</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">colourScheme</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_changeColourScheme</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_changeColourScheme</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="c1"># self._oldColourScheme = self.preferences.general.colourScheme</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">colourScheme</span> <span class="o">=</span> <span class="n">value</span>  <span class="c1">#(COLOUR_SCHEMES[value])</span>

    <span class="nd">@queueStateChange</span><span class="p">(</span><span class="n">_verifyPopupApply</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_queueToggleGeneralOptions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">option</span><span class="p">,</span> <span class="n">checked</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Toggle a general checkbox option in the preferences</span>
<span class="sd">        Requires the parameter to be called &#39;option&#39; so that the decorator gives it a unique name</span>
<span class="sd">        in the internal updates dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">checked</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="p">[</span><span class="n">option</span><span class="p">]:</span>
            <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_toggleGeneralOptions</span><span class="p">,</span> <span class="n">option</span><span class="p">,</span> <span class="n">checked</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_toggleGeneralOptions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">preference</span><span class="p">,</span> <span class="n">checked</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="p">[</span><span class="n">preference</span><span class="p">]</span> <span class="o">=</span> <span class="n">checked</span>
        <span class="c1"># if preference == &#39;showToolbar&#39;:</span>
        <span class="c1">#     for spectrumDisplay in self.project.spectrumDisplays:</span>
        <span class="c1">#         spectrumDisplay.spectrumUtilToolBar.setVisible(checked)</span>
        <span class="c1"># elif preference == &#39;showSpectrumBorder&#39;:</span>
        <span class="c1">#     for strip in self.project.strips:</span>
        <span class="c1">#         for spectrumView in strip.spectrumViews:</span>
        <span class="c1">#             spectrumView._setBorderItemHidden(checked)</span>
        <span class="k">if</span> <span class="n">preference</span> <span class="o">==</span> <span class="s1">&#39;autoBackupEnabled&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">application</span><span class="o">.</span><span class="n">updateAutoBackup</span><span class="p">()</span>

    <span class="nd">@queueStateChange</span><span class="p">(</span><span class="n">_verifyPopupApply</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_queueSetPymolPath</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pymolPath</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="s1">&#39;externalPrograms&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;pymol&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">externalPrograms</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">externalPrograms</span><span class="o">.</span><span class="n">pymol</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">testPymolPathButton</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setPymolPath</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setPymolPath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="c1"># pymolPath = self.pymolPath.get()</span>
        <span class="k">if</span> <span class="s1">&#39;externalPrograms&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;pymol&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">externalPrograms</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">externalPrograms</span><span class="o">.</span><span class="n">pymol</span> <span class="o">=</span> <span class="n">value</span>
        <span class="c1"># self.testPymolPathButton.setText(&#39;test&#39;)</span>

    <span class="k">def</span> <span class="nf">_getPymolPath</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dialog</span> <span class="o">=</span> <span class="n">FileDialog</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Select File&#39;</span><span class="p">,</span> <span class="n">preferences</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="p">)</span>
        <span class="n">file</span> <span class="o">=</span> <span class="n">dialog</span><span class="o">.</span><span class="n">selectedFile</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">file</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pymolPath</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
            <span class="c1"># self._setPymolPath()</span>

    <span class="nd">@queueStateChange</span><span class="p">(</span><span class="n">_verifyPopupApply</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_queueSetAutoBackupFrequency</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">textFromValue</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">autoBackupFrequencyData</span><span class="o">.</span><span class="n">textFromValue</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">autoBackupFrequencyData</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="n">prefValue</span> <span class="o">=</span> <span class="n">textFromValue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">autoBackupFrequency</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">textFromValue</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">!=</span> <span class="n">prefValue</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setAutoBackupFrequency</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setAutoBackupFrequency</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="c1"># try:</span>
        <span class="c1">#     frequency = int(self.autoBackupFrequencyData.text())</span>
        <span class="c1"># except:</span>
        <span class="c1">#     return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">autoBackupFrequency</span> <span class="o">=</span> <span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">application</span><span class="o">.</span><span class="n">updateAutoBackup</span><span class="p">()</span>

    <span class="nd">@queueStateChange</span><span class="p">(</span><span class="n">_verifyPopupApply</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_queueSetRegionPadding</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">textFromValue</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">regionPaddingData</span><span class="o">.</span><span class="n">textFromValue</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">regionPaddingData</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="n">prefValue</span> <span class="o">=</span> <span class="n">textFromValue</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">stripRegionPadding</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">textFromValue</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">!=</span> <span class="n">prefValue</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setRegionPadding</span><span class="p">,</span> <span class="mf">0.01</span> <span class="o">*</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setRegionPadding</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="c1"># try:</span>
        <span class="c1">#     padding = 0.01 * float(self.regionPaddingData.text())</span>
        <span class="c1"># except:</span>
        <span class="c1">#     return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">stripRegionPadding</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@queueStateChange</span><span class="p">(</span><span class="n">_verifyPopupApply</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_queueSetDropFactor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">textFromValue</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dropFactorData</span><span class="o">.</span><span class="n">textFromValue</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dropFactorData</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="n">prefValue</span> <span class="o">=</span> <span class="n">textFromValue</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">peakDropFactor</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">textFromValue</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">!=</span> <span class="n">prefValue</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setDropFactor</span><span class="p">,</span> <span class="mf">0.01</span> <span class="o">*</span> <span class="n">value</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">_setDropFactor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="c1"># try:</span>
        <span class="c1">#     dropFactor = 0.01 * float(self.dropFactorData.text())</span>
        <span class="c1"># except:</span>
        <span class="c1">#     return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">peakDropFactor</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@queueStateChange</span><span class="p">(</span><span class="n">_verifyPopupApply</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_queueSetSymbolSizePixel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">symbolSizePixelData</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">symbolSizePixel</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setSymbolSizePixel</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setSymbolSizePixel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the size of the symbols (pixels)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># try:</span>
        <span class="c1">#     symbolSizePixel = int(self.symbolSizePixelData.text())</span>
        <span class="c1"># except:</span>
        <span class="c1">#     return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">symbolSizePixel</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@queueStateChange</span><span class="p">(</span><span class="n">_verifyPopupApply</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_queueSetSymbolThickness</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">symbolThicknessData</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">symbolThickness</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setSymbolThickness</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setSymbolThickness</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the Thickness of the peak symbols (ppm)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># try:</span>
        <span class="c1">#     symbolThickness = int(self.symbolThicknessData.text())</span>
        <span class="c1"># except:</span>
        <span class="c1">#     return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">symbolThickness</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@queueStateChange</span><span class="p">(</span><span class="n">_verifyPopupApply</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_queueSetContourThickness</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contourThicknessData</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">contourThickness</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setContourThickness</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setContourThickness</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the Thickness of the peak contours (ppm)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># try:</span>
        <span class="c1">#     contourThickness = int(self.contourThicknessData.text())</span>
        <span class="c1"># except:</span>
        <span class="c1">#     return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">contourThickness</span> <span class="o">=</span> <span class="n">value</span>

    <span class="c1"># @queueStateChange(_verifyApply)</span>
    <span class="c1"># def _queueToggleSpectralOptions(self, preference, checked):</span>
    <span class="c1">#     if checked != self.preferences.spectra[preference]:</span>
    <span class="c1">#         return partial(self._toggleSpectralOptions, checked)</span>
    <span class="c1">#</span>
    <span class="c1"># def _toggleSpectralOptions(self, preference, checked):</span>
    <span class="c1">#     self.preferences.spectra[preference] = str(checked)</span>

    <span class="nd">@queueStateChange</span><span class="p">(</span><span class="n">_verifyPopupApply</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_queueSetAnnotations</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">annotationsData</span><span class="o">.</span><span class="n">getIndex</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">annotationType</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setAnnotations</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setAnnotations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the annotation type for the pid labels</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># try:</span>
        <span class="c1">#     annotationType = self.annotationsData.getIndex()</span>
        <span class="c1"># except:</span>
        <span class="c1">#     return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">annotationType</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@queueStateChange</span><span class="p">(</span><span class="n">_verifyPopupApply</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_queueSetSymbol</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">symbol</span><span class="o">.</span><span class="n">getIndex</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">symbolType</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setSymbol</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setSymbol</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the peak symbol type - current a cross or lineWidths</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># try:</span>
        <span class="c1">#     symbol = self.symbol.getIndex()</span>
        <span class="c1"># except:</span>
        <span class="c1">#     return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">symbolType</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@queueStateChange</span><span class="p">(</span><span class="n">_verifyPopupApply</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_queueSetZoomCentre</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">zoomCentre</span><span class="o">.</span><span class="n">getIndex</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">zoomCentreType</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setZoomCentre</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setZoomCentre</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the zoom centring method to either mouse position or centre of the screen</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># try:</span>
        <span class="c1">#     zoomCentre = self.zoomCentre.getIndex()</span>
        <span class="c1"># except:</span>
        <span class="c1">#     return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">zoomCentreType</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@queueStateChange</span><span class="p">(</span><span class="n">_verifyPopupApply</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_queueSetZoomPercent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">textFromValue</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">zoomPercentData</span><span class="o">.</span><span class="n">textFromValue</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">zoomPercentData</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="n">prefValue</span> <span class="o">=</span> <span class="n">textFromValue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">zoomPercent</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">textFromValue</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">!=</span> <span class="n">prefValue</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setZoomPercent</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setZoomPercent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the value for manual zoom</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># try:</span>
        <span class="c1">#     zoomPercent = float(self.zoomPercentData.text())</span>
        <span class="c1"># except:</span>
        <span class="c1">#     return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">zoomPercent</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@queueStateChange</span><span class="p">(</span><span class="n">_verifyPopupApply</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_queueSetStripWidthZoomPercent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">textFromValue</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stripWidthZoomPercentData</span><span class="o">.</span><span class="n">textFromValue</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stripWidthZoomPercentData</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="n">prefValue</span> <span class="o">=</span> <span class="n">textFromValue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">stripWidthZoomPercent</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">textFromValue</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">!=</span> <span class="n">prefValue</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setStripWidthZoomPercent</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setStripWidthZoomPercent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the value for increasing/decreasing width of strips</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># try:</span>
        <span class="c1">#     stripWidthZoomPercent = float(self.stripWidthZoomPercentData.text())</span>
        <span class="c1"># except:</span>
        <span class="c1">#     return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">stripWidthZoomPercent</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@queueStateChange</span><span class="p">(</span><span class="n">_verifyPopupApply</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_queueSetNumSideBands</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">textFromValue</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">showSideBandsData</span><span class="o">.</span><span class="n">textFromValue</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">showSideBandsData</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="n">prefValue</span> <span class="o">=</span> <span class="n">textFromValue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">numSideBands</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">textFromValue</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">!=</span> <span class="n">prefValue</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setNumSideBands</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setNumSideBands</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the value for number of sideband gridlines to display</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">numSideBands</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@queueStateChange</span><span class="p">(</span><span class="n">_verifyPopupApply</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_queueSetMatchAxisCode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matchAxisCode</span><span class="o">.</span><span class="n">getIndex</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">matchAxisCode</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setMatchAxisCode</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setMatchAxisCode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the matching of the axis codes across different strips</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># try:</span>
        <span class="c1">#     matchAxisCode = self.matchAxisCode.getIndex()</span>
        <span class="c1"># except:</span>
        <span class="c1">#     return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">matchAxisCode</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@queueStateChange</span><span class="p">(</span><span class="n">_verifyPopupApply</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_queueSetAxisOrderingOptions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axisOrderingOptions</span><span class="o">.</span><span class="n">getIndex</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">axisOrderingOptions</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setAxisOrderingOptions</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setAxisOrderingOptions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the option for the axis ordering of strips when opening a new display</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># try:</span>
        <span class="c1">#     axisOrderingOptions = self.axisOrderingOptions.getIndex()</span>
        <span class="c1"># except:</span>
        <span class="c1">#     return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">axisOrderingOptions</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@queueStateChange</span><span class="p">(</span><span class="n">_verifyPopupApply</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_queueSetPeakFittingMethod</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">PEAKFITTINGDEFAULTS</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">peakFittingMethod</span><span class="o">.</span><span class="n">getIndex</span><span class="p">()]</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">peakFittingMethod</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setPeakFittingMethod</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setPeakFittingMethod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the matching of the axis codes across different strips</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># try:</span>
        <span class="c1">#     peakFittingMethod = PEAKFITTINGDEFAULTS[self.peakFittingMethod.getIndex()]</span>
        <span class="c1"># except:</span>
        <span class="c1">#     return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">peakFittingMethod</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@queueStateChange</span><span class="p">(</span><span class="n">_verifyPopupApply</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_queueSetAspect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">aspect</span><span class="p">):</span>
        <span class="n">textFromValue</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">aspectData</span><span class="p">[</span><span class="n">aspect</span><span class="p">]</span><span class="o">.</span><span class="n">textFromValue</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">aspectData</span><span class="p">[</span><span class="n">aspect</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="n">prefValue</span> <span class="o">=</span> <span class="n">textFromValue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">aspectRatios</span><span class="p">[</span><span class="n">aspect</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">textFromValue</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">!=</span> <span class="n">prefValue</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setAspect</span><span class="p">,</span> <span class="n">aspect</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setAspect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">aspect</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the aspect ratio for the axes</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># try:</span>
        <span class="c1">#     aspectValue = float(self.aspectData[aspect].text())</span>
        <span class="c1"># except Exception as es:</span>
        <span class="c1">#     return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">aspectRatios</span><span class="p">[</span><span class="n">aspect</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@queueStateChange</span><span class="p">(</span><span class="n">_verifyPopupApply</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_queueSetIntensityLimit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">textFromValue</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">showIntensityLimitBox</span><span class="o">.</span><span class="n">textFromValue</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">showIntensityLimitBox</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="n">prefValue</span> <span class="o">=</span> <span class="n">textFromValue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">intensityLimit</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">textFromValue</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">!=</span> <span class="n">prefValue</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setIntensityLimit</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setIntensityLimit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the value for the minimum intensity limit</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># try:</span>
        <span class="c1">#     limitValue = float(self.showIntensityLimitBox.text())</span>
        <span class="c1"># except Exception as es:</span>
        <span class="c1">#     return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">intensityLimit</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@queueStateChange</span><span class="p">(</span><span class="n">_verifyPopupApply</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_queueSetMultipletAveraging</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">multipletAveraging</span><span class="o">.</span><span class="n">getIndex</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">multipletAveraging</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setMultipletAveraging</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setMultipletAveraging</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the multiplet averaging type - normal or weighted</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># try:</span>
        <span class="c1">#     symbol = self.multipletAveraging.getSelectedText()</span>
        <span class="c1"># except:</span>
        <span class="c1">#     return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">multipletAveraging</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@queueStateChange</span><span class="p">(</span><span class="n">_verifyPopupApply</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_queueSetVolumeIntegralLimit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">textFromValue</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">volumeIntegralLimitData</span><span class="o">.</span><span class="n">textFromValue</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">volumeIntegralLimitData</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="n">prefValue</span> <span class="o">=</span> <span class="n">textFromValue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">volumeIntegralLimit</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">textFromValue</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">!=</span> <span class="n">prefValue</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setVolumeIntegralLimit</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setVolumeIntegralLimit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the value for increasing/decreasing width of strips</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># try:</span>
        <span class="c1">#     volumeIntegralLimit = float(self.volumeIntegralLimitData.text())</span>
        <span class="c1"># except:</span>
        <span class="c1">#     return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="o">.</span><span class="n">volumeIntegralLimit</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@queueStateChange</span><span class="p">(</span><span class="n">_verifyPopupApply</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_queueSetUseProxy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">useProxyBox</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="c1"># set the state of the other buttons</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setProxyButtons</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">proxySettings</span><span class="o">.</span><span class="n">useProxy</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setUseProxy</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setUseProxy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="c1"># try:</span>
        <span class="c1">#     value = self.useProxyBox.isChecked()</span>
        <span class="c1"># except:</span>
        <span class="c1">#     return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">proxySettings</span><span class="o">.</span><span class="n">useProxy</span> <span class="o">=</span> <span class="n">value</span>
        <span class="c1"># set the state of the other buttons</span>
        <span class="c1"># self._setProxyButtons()</span>

    <span class="nd">@queueStateChange</span><span class="p">(</span><span class="n">_verifyPopupApply</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_queueUseSystemProxy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">useSystemProxyBox</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="c1"># set the state of the other buttons</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setProxyButtons</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">proxySettings</span><span class="o">.</span><span class="n">useSystemProxy</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setUseSystemProxy</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setUseSystemProxy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="c1"># try:</span>
        <span class="c1">#     value = self.useSystemProxyBox.isChecked()</span>
        <span class="c1"># except:</span>
        <span class="c1">#     return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">proxySettings</span><span class="o">.</span><span class="n">useSystemProxy</span> <span class="o">=</span> <span class="n">value</span>
        <span class="c1"># set the state of the other buttons</span>
        <span class="c1"># self._setProxyButtons()</span>

    <span class="nd">@queueStateChange</span><span class="p">(</span><span class="n">_verifyPopupApply</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_queueSetProxyAddress</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">proxyAddressData</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">proxySettings</span><span class="o">.</span><span class="n">proxyAddress</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setProxyAddress</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setProxyAddress</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="c1"># try:</span>
        <span class="c1">#     value = str(self.proxyAddressData.text())</span>
        <span class="c1"># except:</span>
        <span class="c1">#     return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">proxySettings</span><span class="o">.</span><span class="n">proxyAddress</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@queueStateChange</span><span class="p">(</span><span class="n">_verifyPopupApply</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_queueSetProxyPort</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">proxyPortData</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">proxySettings</span><span class="o">.</span><span class="n">proxyPort</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setProxyPort</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setProxyPort</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="c1"># try:</span>
        <span class="c1">#     value = str(self.proxyPortData.text())</span>
        <span class="c1"># except:</span>
        <span class="c1">#     return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">proxySettings</span><span class="o">.</span><span class="n">proxyPort</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@queueStateChange</span><span class="p">(</span><span class="n">_verifyPopupApply</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_queueSetUseProxyPassword</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">useProxyPasswordBox</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="c1"># set the state of the other buttons</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_setProxyButtons</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">proxySettings</span><span class="o">.</span><span class="n">useProxyPassword</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setUseProxyPassword</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setUseProxyPassword</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="c1"># try:</span>
        <span class="c1">#     value = self.useProxyPasswordBox.isChecked()</span>
        <span class="c1"># except:</span>
        <span class="c1">#     return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">proxySettings</span><span class="o">.</span><span class="n">useProxyPassword</span> <span class="o">=</span> <span class="n">value</span>
        <span class="c1"># set the state of the other buttons</span>
        <span class="c1"># self._setProxyButtons()</span>

    <span class="nd">@queueStateChange</span><span class="p">(</span><span class="n">_verifyPopupApply</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_queueSetProxyUsername</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">proxyUsernameData</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">proxySettings</span><span class="o">.</span><span class="n">proxyUsername</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setProxyUsername</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setProxyUsername</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="c1"># try:</span>
        <span class="c1">#     value = str(self.proxyUsernameData.text())</span>
        <span class="c1"># except:</span>
        <span class="c1">#     return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">proxySettings</span><span class="o">.</span><span class="n">proxyUsername</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@queueStateChange</span><span class="p">(</span><span class="n">_verifyPopupApply</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_queueSetProxyPassword</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_userPreferences</span><span class="o">.</span><span class="n">encodeValue</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">proxyPasswordData</span><span class="o">.</span><span class="n">get</span><span class="p">()))</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">proxySettings</span><span class="o">.</span><span class="n">proxyPassword</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_setProxyPassword</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setProxyPassword</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="c1"># try:</span>
        <span class="c1">#     value = self._userPreferences.encodeValue(str(self.proxyPasswordData.text()))</span>
        <span class="c1"># except:</span>
        <span class="c1">#     return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">proxySettings</span><span class="o">.</span><span class="n">proxyPassword</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">_setProxyButtons</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Enable/disable proxy widgets based on check boxes</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">usePW</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">useProxyPasswordBox</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>  <span class="c1">#self.preferences.proxySettings.useProxyPassword</span>
        <span class="n">useP</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">useProxyBox</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>  <span class="c1">#self.preferences.proxySettings.useProxy</span>
        <span class="n">useSP</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">usePEnabled</span> <span class="o">=</span> <span class="n">useP</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">useSP</span>

        <span class="c1"># self.useSystemProxyBox.setEnabled(useP)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxyAddressData</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="n">usePEnabled</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxyPortData</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="n">usePEnabled</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">useProxyPasswordBox</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="n">usePEnabled</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxyUsernameData</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="n">usePEnabled</span> <span class="ow">and</span> <span class="n">usePW</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">proxyPasswordData</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="n">usePEnabled</span> <span class="ow">and</span> <span class="n">usePW</span><span class="p">)</span>

    <span class="nd">@queueStateChange</span><span class="p">(</span><span class="n">_verifyPopupApply</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_queueApplyToSpectrumDisplays</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">option</span><span class="p">,</span> <span class="n">checked</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Toggle a general checkbox option in the preferences</span>
<span class="sd">        Requires the parameter to be called &#39;option&#39; so that the decorator gives it a unique name</span>
<span class="sd">        in the internal updates dict</span>
<span class="sd">        - not sure whether needed now</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">checked</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">general</span><span class="p">[</span><span class="n">option</span><span class="p">]:</span>
            <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_toggleGeneralOptions</span><span class="p">,</span> <span class="n">option</span><span class="p">,</span> <span class="n">checked</span><span class="p">)</span></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../../index.html">Python  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../../../index.html" >Module code</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright .
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.4.0.
    </div>
  </body>
</html>